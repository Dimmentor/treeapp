# Django & DRF –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫

## üîç –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ
1. [–û–±—â–∏–µ —Å–≤–µ–¥–µ–Ω–∏—è –æ Django](#1-–æ–±—â–∏–µ-—Å–≤–µ–¥–µ–Ω–∏—è-–æ-django)
2. [MVC –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ Django](#2-mvc-–Ω–∞-–ø—Ä–∏–º–µ—Ä–µ-django)
3. [–û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –≤ Django](#3-–æ–±—Ä–∞–±–æ—Ç–∫–∞-–∑–∞–ø—Ä–æ—Å–∞-–≤-django)
4. [–ß—Ç–æ —Ç–∞–∫–æ–µ middleware](#4-—á—Ç–æ-—Ç–∞–∫–æ–µ-middleware)
5. [–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ middleware](#5-—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ-middleware)
6. [–ß—Ç–æ —Ç–∞–∫–æ–µ —Å–∏–≥–Ω–∞–ª—ã](#6-—á—Ç–æ-—Ç–∞–∫–æ–µ-—Å–∏–≥–Ω–∞–ª—ã)
7. [–ü—Ä–∏–º–µ—Ä—ã —Å–∏–≥–Ω–∞–ª–æ–≤](#7-–ø—Ä–∏–º–µ—Ä—ã-—Å–∏–≥–Ω–∞–ª–æ–≤)
8. [–ö–∞—Å—Ç–æ–º–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã manage.py](#8-–∫–∞—Å—Ç–æ–º–Ω—ã–µ-–∫–æ–º–∞–Ω–¥—ã-managepy)
9. [–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ User](#9-—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ-–º–æ–¥–µ–ª–∏-user)
10. [Permission –∏ Group](#10-permission-–∏-group)
11. [–°–º–µ–Ω–∞ SECRET_KEY](#11-—Å–º–µ–Ω–∞-secret_key)
12. [select_related vs prefetch_related](#12-select_related-vs-prefetch_related)
13. [–ö–æ–≥–¥–∞ prefetch_related –ª—É—á—à–µ](#13-–∫–æ–≥–¥–∞-prefetch_related-–ª—É—á—à–µ)
14. [OuterRef](#14-outerref)
15. [only vs values vs values_list](#15-only-vs-values-vs-values_list)
16. [Q-–æ–±—ä–µ–∫—Ç—ã](#16-q-–æ–±—ä–µ–∫—Ç—ã)
17. [F-–≤—ã—Ä–∞–∂–µ–Ω–∏—è](#17-f-–≤—ã—Ä–∞–∂–µ–Ω–∏—è)
18. [–ú–∞—Å—Å–æ–≤–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤](#18-–º–∞—Å—Å–æ–≤–æ–µ-—Å–æ–∑–¥–∞–Ω–∏–µ-–æ–±—ä–µ–∫—Ç–æ–≤)
19. [count() vs len()](#19-count-vs-len)
20. [objects.none](#20-objectsnone)
21. [–õ–µ–Ω–∏–≤—ã–µ –∏ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã](#21-–ª–µ–Ω–∏–≤—ã–µ-–∏-–Ω–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ-–∑–∞–ø—Ä–æ—Å—ã)
22. [annotate vs aggregate](#22-annotate-vs-aggregate)
23. [–ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –º–æ–¥–µ–ª–∏](#23-–∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ-–º–æ–¥–µ–ª–∏)
24. [–ê—Ç—Ä–∏–±—É—Ç—ã class Meta](#24-–∞—Ç—Ä–∏–±—É—Ç—ã-class-meta)
25. [select_for_update](#25-select_for_update)
26. [–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∑–∞–ø–∏—Å–µ–π](#26-–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞-–∑–∞–ø–∏—Å–µ–π)
27. [GenericForeignKey](#27-genericforeignkey)
28. [–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –ø–æ –≥—Ä—É–ø–ø–∞–º](#28-–ø—Ä–æ–≤–µ—Ä–∫–∞-–ø—Ä–∞–≤-–ø–æ-–≥—Ä—É–ø–ø–∞–º)
29. [–†–∞–∑–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–ª—è –º–µ—Ç–æ–¥–æ–≤ ViewSet](#29-—Ä–∞–∑–Ω—ã–µ-–ø—Ä–∞–≤–∞-–¥–ª—è-–º–µ—Ç–æ–¥–æ–≤-viewset)
30. [–î–µ–∫–æ—Ä–∞—Ç–æ—Ä action](#30-–¥–µ–∫–æ—Ä–∞—Ç–æ—Ä-action)
31. [Throttling](#31-throttling)
32. [–ü–ª—é—Å—ã –∏ –º–∏–Ω—É—Å—ã DRF](#32-–ø–ª—é—Å—ã-–∏-–º–∏–Ω—É—Å—ã-drf)

---

### 1) –û–±—â–∏–µ —Å–≤–µ–¥–µ–Ω–∏—è –æ Django
**–û—Ç–≤–µ—Ç**: Django ‚Äî —ç—Ç–æ –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π Python-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫...


### 2) MVC –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ Django
**–û—Ç–≤–µ—Ç**: Django –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω MTV (Model-Template-View), –∫–æ—Ç–æ—Ä—ã–π –ø–æ—Ö–æ–∂ –Ω–∞ MVC:

Model (–ú–æ–¥–µ–ª—å) ‚Äì –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –¥–∞–Ω–Ω—ã–µ –∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É (–∞–Ω–∞–ª–æ–≥ Model –≤ MVC).

Template (–®–∞–±–ª–æ–Ω) ‚Äì –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ (–∞–Ω–∞–ª–æ–≥ View –≤ MVC).

View (–ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ) ‚Äì –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç–≤–µ—Ç (–∞–Ω–∞–ª–æ–≥ Controller –≤ MVC).

–ü—Ä–∏–º–µ—Ä:

–ú–æ–¥–µ–ª—å Post —Ö—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ –æ –ø–æ—Å—Ç–µ –≤ –±–ª–æ–≥–µ.

–®–∞–±–ª–æ–Ω post_detail.html –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ø–æ—Å—Ç.

–ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ PostDetailView –ø–æ–ª—É—á–∞–µ—Ç –ø–æ—Å—Ç –∏–∑ –ë–î –∏ –ø–µ—Ä–µ–¥–∞—ë—Ç –µ–≥–æ –≤ —à–∞–±–ª–æ–Ω.

### 3) –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –≤ Django (Request-Response Cycle)
**–û—Ç–≤–µ—Ç**: –ó–∞–ø—Ä–æ—Å –ø—Ä–∏—Ö–æ–¥–∏—Ç –≤ Django (—á–µ—Ä–µ–∑ WSGI-—Å–µ—Ä–≤–µ—Ä, –Ω–∞–ø—Ä–∏–º–µ—Ä, Gunicorn).

URL-–¥–∏—Å–ø–µ—Ç—á–µ—Ä (urls.py) –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫–æ–µ view –¥–æ–ª–∂–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –∑–∞–ø—Ä–æ—Å.

Middleware –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é).

View –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ª–æ–≥–∏–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ ORM).

–®–∞–±–ª–æ–Ω —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è —Å –¥–∞–Ω–Ω—ã–º–∏ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è).

Middleware –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—Ç–≤–µ—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–æ–±–∞–≤–ª—è–µ—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∏).

–û—Ç–≤–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫–ª–∏–µ–Ω—Ç—É.

### 4) –ß—Ç–æ —Ç–∞–∫–æ–µ middleware?
**–û—Ç–≤–µ—Ç**: Middleware ‚Äî —ç—Ç–æ –ø—Ä–æ—Å–ª–æ–π–∫–∞ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–æ–º –∏ view (–∏–ª–∏ –æ—Ç–≤–µ—Ç–æ–º –∏ –∫–ª–∏–µ–Ω—Ç–æ–º), –∫–æ—Ç–æ—Ä–∞—è –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω—è—Ç—å –∑–∞–ø—Ä–æ—Å/–æ—Ç–≤–µ—Ç. –ù–∞–ø—Ä–∏–º–µ—Ä:

AuthenticationMiddleware ‚Äì –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

CsrfMiddleware ‚Äì –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç CSRF-–∞—Ç–∞–∫.

### 5) –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ middleware?
**–û—Ç–≤–µ—Ç**: django.middleware.security.SecurityMiddleware ‚Äì HTTPS, HSTS –∏ –¥—Ä—É–≥–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.

django.contrib.sessions.middleware.SessionMiddleware ‚Äì —Ä–∞–±–æ—Ç–∞ —Å —Å–µ—Å—Å–∏—è–º–∏.

django.middleware.csrf.CsrfViewMiddleware ‚Äì CSRF-–∑–∞—â–∏—Ç–∞.

django.contrib.auth.middleware.AuthenticationMiddleware ‚Äì –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è.

django.middleware.common.CommonMiddleware ‚Äì –±–∞–∑–æ–≤—ã–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ URL.

SecurityMiddleware
–≠—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π middleware Django, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–±–∞–≤–ª—è–µ—Ç HTTP-–∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:
HSTS (HTTP Strict Transport Security) ‚Äì –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç —Å–∞–π—Ç –Ω–∞ HTTPS.

X-Content-Type-Options: nosniff ‚Äì –∑–∞–ø—Ä–µ—â–∞–µ—Ç –±—Ä–∞—É–∑–µ—Ä—É "—É–≥–∞–¥—ã–≤–∞—Ç—å" MIME-—Ç–∏–ø.

X-XSS-Protection ‚Äì –∑–∞—â–∏—Ç–∞ –æ—Ç XSS-–∞—Ç–∞–∫.

X-Frame-Options: DENY ‚Äì –∑–∞–ø—Ä–µ—â–∞–µ—Ç –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–µ —Å–∞–π—Ç–∞ –≤ <iframe>.

### 6) –ß—Ç–æ —Ç–∞–∫–æ–µ —Å–∏–≥–Ω–∞–ª—ã?
**–û—Ç–≤–µ—Ç**: –°–∏–≥–Ω–∞–ª—ã ‚Äî —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–¥–∞ –ø—Ä–∏ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏—è—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ –∏–ª–∏ –∑–∞–ø—Ä–æ—Å –∫ –ë–î).

### 7) –ü—Ä–∏–º–µ—Ä—ã —Å–∏–≥–Ω–∞–ª–æ–≤?
**–û—Ç–≤–µ—Ç**: pre_save, post_save ‚Äì –¥–æ/–ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –º–æ–¥–µ–ª–∏.

pre_delete, post_delete ‚Äì –¥–æ/–ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è.

request_started, request_finished ‚Äì –Ω–∞—á–∞–ª–æ/–∫–æ–Ω–µ—Ü –∑–∞–ø—Ä–æ—Å–∞.

m2m_changed ‚Äì –∏–∑–º–µ–Ω–µ–Ω–∏–µ ManyToMany-–ø–æ–ª—è.

–ü—Ä–∏–º–µ—Ä:

python
from django.db.models.signals import post_save
from django.dispatch import receiver

@receiver(post_save, sender=User)
def user_created(sender, instance, created, **kwargs):
    if created:
        print("–ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–Ω!")
        
### 8) –ö–∞—Å—Ç–æ–º–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã manage.py?
**–û—Ç–≤–µ—Ç**: –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª management/commands/mycommand.py –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏.

–£–Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å—Å—è –æ—Ç BaseCommand:

python
from django.core.management.base import BaseCommand

class Command(BaseCommand):
    help = "–û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã"

    def handle(self, *args, **options):
        self.stdout.write("Hello, Django!")
–í—ã–∑–≤–∞—Ç—å: python manage.py mycommand.

### 9) –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ User?
**–û—Ç–≤–µ—Ç**: OneToOne-—Å–≤—è–∑—å:

python
from django.contrib.auth.models import User

class Profile(models.Model):
    user = models.OneToOneField(User, on_delete=models.CASCADE)
    bio = models.TextField()
Proxy-–º–æ–¥–µ–ª—å (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥—ã).

–ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π User (–µ—Å–ª–∏ –Ω—É–∂–Ω–∞ –ø–æ–ª–Ω–∞—è –∑–∞–º–µ–Ω–∞):

python
AUTH_USER_MODEL = "myapp.CustomUser"  # –≤ settings.py

### 10) Permission –∏ Group –≤ Django?
**–û—Ç–≤–µ—Ç**:
Permission ‚Äì –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, can_publish_post).

Group ‚Äì –≥—Ä—É–ø–ø–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –æ–±—â–∏–º–∏ –ø—Ä–∞–≤–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–†–µ–¥–∞–∫—Ç–æ—Ä—ã").

–ü—Ä–∏–º–µ—Ä:

python
from django.contrib.auth.models import Group, Permission

editors = Group.objects.create(name="–†–µ–¥–∞–∫—Ç–æ—Ä—ã")
permission = Permission.objects.get(codename="publish_post")
editors.permissions.add(permission)

### 11) –°–º–µ–Ω–∞ SECRET_KEY?
**–û—Ç–≤–µ—Ç**:
–°–µ—Å—Å–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å—Ç–∞–Ω—É—Ç –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º–∏.

CSRF-—Ç–æ–∫–µ–Ω—ã –ø–µ—Ä–µ—Å—Ç–∞–Ω—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å.

–ü–∞—Ä–æ–ª–∏, –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –¥–ª—è —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è), –º–æ–≥—É—Ç —Å—Ç–∞—Ç—å –Ω–µ—á–∏—Ç–∞–µ–º—ã–º–∏.

### 12) select_related vs prefetch_related?
**–û—Ç–≤–µ—Ç**:
select_related ‚Äì JOIN –≤ SQL –¥–ª—è ForeignKey –∏ OneToOne.

prefetch_related ‚Äì –æ—Ç–¥–µ–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å –¥–ª—è ManyToMany –∏ reverse ForeignKey.

–ü—Ä–∏–º–µ—Ä:

python
# 1 –∑–∞–ø—Ä–æ—Å —Å JOIN
Author.objects.select_related('profile').get(id=1)

# 2 –∑–∞–ø—Ä–æ—Å–∞: –∞–≤—Ç–æ—Ä—ã + –∏—Ö –∫–Ω–∏–≥–∏
Author.objects.prefetch_related('books').all()

### 13) –ö–æ–≥–¥–∞ prefetch_related –ª—É—á—à–µ —á–µ–º select_related –¥–ª—è —Å–≤—è–∑–∏ –æ–¥–∏–Ω –∫–æ –º–Ω–æ–≥–∏–º?
**–û—Ç–≤–µ—Ç**:
–ï—Å–ª–∏ —É —Ä–æ–¥–∏—Ç–µ–ª—è –º–Ω–æ–≥–æ –¥–µ—Ç–µ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, —É –ê–≤—Ç–æ—Ä–∞ 1000 –ö–Ω–∏–≥), prefetch_related –º–æ–∂–µ—Ç –±—ã—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –æ–≥—Ä–æ–º–Ω–æ–≥–æ JOIN.

### 14) –ß—Ç–æ —Ç–∞–∫–æ–µ OuterRef?
**–û—Ç–≤–µ—Ç**:
OuterRef –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –ø–æ–¥–∑–∞–ø—Ä–æ—Å–∞—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ annotate).

–ü—Ä–∏–º–µ—Ä:

python
from django.db.models import OuterRef, Subquery

newest = Comment.objects.filter(post=OuterRef('pk')).order_by('-created_at')
Post.objects.annotate(newest_comment_text=Subquery(newest.values('text')[:1]))

### 15) –ö–∞–∫–∞—è —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É only, values –∏ values_list?
**–û—Ç–≤–µ—Ç**:
only('field') ‚Äì –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ç–æ–ª—å–∫–æ —É–∫–∞–∑–∞–Ω–Ω—ã–µ –ø–æ–ª—è, –Ω–æ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã (–ª–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞).

values('field') ‚Äì –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç QuerySet —Å–ª–æ–≤–∞—Ä–µ–π.

values_list('field', flat=True) ‚Äì –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç QuerySet –∫–æ—Ä—Ç–µ–∂–µ–π (–∏–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–π, –µ—Å–ª–∏ flat=True).

### 16) –ß—Ç–æ —Ç–∞–∫–æ–µ Q-–æ–±—ä–µ–∫—Ç—ã?
**–û—Ç–≤–µ—Ç**:
–ü–æ–∑–≤–æ–ª—è—é—Ç —Å—Ç—Ä–æ–∏—Ç—å —Å–ª–æ–∂–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã —Å OR, AND –∏ NOT.

–ü—Ä–∏–º–µ—Ä:

python
from django.db.models import Q

Post.objects.filter(Q(title__startswith="Django") | Q(title__startswith="Python"))

### 17) –ß—Ç–æ —Ç–∞–∫–æ–µ F-–≤—ã—Ä–∞–∂–µ–Ω–∏—è?
**–û—Ç–≤–µ—Ç**:
–ü–æ–∑–≤–æ–ª—è—é—Ç —Å—Å—ã–ª–∞—Ç—å—Å—è –Ω–∞ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è –≤ –∑–∞–ø—Ä–æ—Å–µ.

–ü—Ä–∏–º–µ—Ä (—É–≤–µ–ª–∏—á–∏—Ç—å —Å—á—ë—Ç—á–∏–∫):

python
from django.db.models import F

Product.objects.update(price=F('price') * 1.1)

### 18) –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å 100 —Ç—ã—Å—è—á –æ–±—ä–µ–∫—Ç–æ–≤ –≤ –±–∞–∑–µ?
**–û—Ç–≤–µ—Ç**:
–ß–µ—Ä–µ–∑ bulk_create:

python
objs = [MyModel(name=f"Object {i}") for i in range(100000)]
MyModel.objects.bulk_create(objs, batch_size=1000)  # –ü–∞–∫–µ—Ç–∞–º–∏ –ø–æ 1000

–ü–ª—é—Å—ã:

–£–º–µ–Ω—å—à–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ –ë–î.

–†–∞–±–æ—Ç–∞–µ—Ç –≤ 10-100 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ, —á–µ–º —Ü–∏–∫–ª —Å save().

–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:

–ù–µ –≤—ã–∑—ã–≤–∞–µ—Ç save() –∏ —Å–∏–≥–Ω–∞–ª—ã (post_save –∏ —Ç.–¥.).

–ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å auto_now_add (–µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞—Ç—å batch_size).

### 19) –ü–æ—á–µ–º—É –Ω–∞–¥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å objects.count() –≤–º–µ—Å—Ç–æ len(objects)?
**–û—Ç–≤–µ—Ç**:
count() –¥–µ–ª–∞–µ—Ç SELECT COUNT(*) ‚Äì –±—ã—Å—Ç—Ä–æ.

len() –∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤—Å–µ –æ–±—ä–µ–∫—Ç—ã –≤ –ø–∞–º—è—Ç—å ‚Äì –º–µ–¥–ª–µ–Ω–Ω–æ.

### 20) –ß—Ç–æ –¥–µ–ª–∞–µ—Ç objects.none?
**–û—Ç–≤–µ—Ç**:
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Å—Ç–æ–π QuerySet (–ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –≤ –º–µ—Ç–æ–¥–∞—Ö).

### 21) –í –∫–∞–∫–∏—Ö —Å–ª—É—á–∞—è—Ö Django –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ, –≤ –∫–∞–∫–∏—Ö –ª–µ–Ω–∏–≤–æ?
**–û—Ç–≤–µ—Ç**:
–õ–µ–Ω–∏–≤–æ:

filter(), all(), exclude() ‚Äì –Ω–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç –∑–∞–ø—Ä–æ—Å, –ø–æ–∫–∞ –Ω–µ –Ω—É–∂–Ω–æ —Ä–µ–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ.

–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ:

len(), list(), –∏—Ç–µ—Ä–∞—Ü–∏—è, bool(), count(), exists().

–õ–µ–Ω–∏–≤—ã–µ (–∑–∞–ø—Ä–æ—Å –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏)
python
queryset = Book.objects.all()  # –ó–∞–ø—Ä–æ—Å –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω
books = list(queryset)         # –ó–∞–ø—Ä–æ—Å –≤—ã–ø–æ–ª–Ω–µ–Ω (SELECT * FROM books)
–ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ (–∑–∞–ø—Ä–æ—Å –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å—Ä–∞–∑—É)
python
count = Book.objects.count()    # SELECT COUNT(*) FROM books
exists = Book.objects.exists()  # SELECT 1 FROM books LIMIT 1

### 22) –í —á—ë–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É annotate –∏ aggregate?
**–û—Ç–≤–µ—Ç**:
annotate() ‚Äì –¥–æ–±–∞–≤–ª—è–µ—Ç –≤—ã—á–∏—Å–ª—è–µ–º–æ–µ –ø–æ–ª–µ –∫ –∫–∞–∂–¥–æ–º—É –æ–±—ä–µ–∫—Ç—É.

aggregate() ‚Äì –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—â–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, Avg, Sum).

–ü—Ä–∏–º–µ—Ä:

python
# –°—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥ –∫–∞–∂–¥–æ–≥–æ –∞–≤—Ç–æ—Ä–∞
Author.objects.annotate(avg_rating=Avg('books__rating'))

# –û–±—â–∏–π —Å—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥ –≤—Å–µ—Ö –∫–Ω–∏–≥
Book.objects.aggregate(Avg('rating'))

### 23) –ß—Ç–æ —Ç–∞–∫–æ–µ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –º–æ–¥–µ–ª–∏?
**–û—Ç–≤–µ—Ç**:
–≠—Ç–æ –º–æ–¥–µ–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —Å–æ–∑–¥–∞—é—Ç —Ç–∞–±–ª–∏—Ü—É –≤ –ë–î, –Ω–æ –æ—Ç –Ω–∏—Ö –º–æ–∂–Ω–æ –Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å—Å—è.

–ü—Ä–∏–º–µ—Ä:

python
class TimestampModel(models.Model):
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)

    class Meta:
        abstract = True

class Post(TimestampModel):
    title = models.CharField(max_length=100)
    
### 24) –ö–∞–∫–∏–µ –∞—Ç—Ä–∏–±—É—Ç—ã —É class Meta –¥–ª—è –º–æ–¥–µ–ª–µ–π –∑–Ω–∞–µ—à—å?
**–û—Ç–≤–µ—Ç**:
verbose_name ‚Äì —á–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º–æ–µ –∏–º—è.

ordering ‚Äì —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (['-created_at']).

indexes ‚Äì –∏–Ω–¥–µ–∫—Å—ã ([models.Index(fields=['title'])]).

unique_together ‚Äì —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –ø–æ–ª–µ–π.

### 25) –ó–∞—á–µ–º –Ω—É–∂–µ–Ω select_for_update?
**–û—Ç–≤–µ—Ç**:
–ë–ª–æ–∫–∏—Ä—É–µ—Ç —Å—Ç—Ä–æ–∫–∏ –≤ –ë–î –¥–ª—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è—Ö).

–ü—Ä–∏–º–µ—Ä:

python
from django.db import transaction

with transaction.atomic():
    product = Product.objects.select_for_update().get(id=1)
    product.stock -= 1
    product.save()
    
### 26) –ß—Ç–æ –±—É–¥–µ—Ç –µ—Å–ª–∏ –æ–±—Ä–∞—Ç–∏–º—Å—è –∫ –∑–∞–ø–∏—Å—è–º, –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —á–µ—Ä–µ–∑ select_for_update?
**–û—Ç–≤–µ—Ç**:
–ó–∞–ø—Ä–æ—Å –±—É–¥–µ—Ç –∂–¥–∞—Ç—å, –ø–æ–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –Ω–µ —Å–Ω–∏–º–µ—Ç—Å—è (–µ—Å–ª–∏ nowait=False) –∏–ª–∏ –ø–æ–ª—É—á–∏—Ç –æ—à–∏–±–∫—É (–µ—Å–ª–∏ nowait=True).

### 27) –ö–æ–≥–¥–∞ –ø—Ä–∏–≥–æ–¥–∏—Ç—Å—è GenericForeignKey?
**–û—Ç–≤–µ—Ç**:
–ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ —Å–≤—è–∑–∞—Ç—å –º–æ–¥–µ–ª—å —Å —Ä–∞–∑–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ –º–æ–¥–µ–ª–µ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –ü–æ—Å—Ç–∞–º –∏ –í–∏–¥–µ–æ).

### 28) –ö–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –ø—Ä–∞–≤ –ø–æ –Ω–∞–ª–∏—á–∏—é –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π –≥—Ä—É–ø–ø—ã —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è?
**–û—Ç–≤–µ—Ç**:
–ß–µ—Ä–µ–∑ permission_classes –≤ DRF:

python
from rest_framework.permissions import BasePermission

class IsEditor(BasePermission):
    def has_permission(self, request, view):
        return request.user.groups.filter(name="–†–µ–¥–∞–∫—Ç–æ—Ä—ã").exists()

class MyView(APIView):
    permission_classes = [IsEditor]
    
### 29) –ö–∞–∫ –¥–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –¥–æ—Å—Ç—É–ø –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–≥–æ viewset –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤?
**–û—Ç–≤–µ—Ç**:
–ß–µ—Ä–µ–∑ get_permissions:

python
class MyViewSet(ViewSet):
    def get_permissions(self):
        if self.action == 'create':
            return [IsAdminUser()]
        return [IsAuthenticated()]
        
### 30) –ó–∞—á–µ–º –Ω—É–∂–µ–Ω –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä action?
**–û—Ç–≤–µ—Ç**:
–î–æ–±–∞–≤–ª—è–µ—Ç –∫–∞—Å—Ç–æ–º–Ω—ã–µ –º–µ—Ç–æ–¥—ã –≤–æ ViewSet (–Ω–∞–ø—Ä–∏–º–µ—Ä, @action(detail=True, methods=['post'])).

### 31) –ß—Ç–æ —Ç–∞–∫–æ–µ throttling –∏ –∫–∞–∫ –µ–≥–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å?
**–û—Ç–≤–µ—Ç**:
Throttling ‚Äì –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø—Ä–æ—Å–æ–≤.

–ù–∞—Å—Ç—Ä–æ–π–∫–∞:

python
REST_FRAMEWORK = {
    'DEFAULT_THROTTLE_RATES': {
        'user': '100/hour',
    }
}

### 32) –ü–ª—é—Å—ã –∏ –º–∏–Ω—É—Å—ã DRF
**–û—Ç–≤–µ—Ç**:
**–ü–ª—é—Å—ã**:
- –ë—ã—Å—Ç—Ä–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ API
- –ì–∏–±–∫–æ—Å—Ç—å (—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä—ã, permissions, throttling)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ REST

**–ú–∏–Ω—É—Å—ã**:
- –ò–Ω–æ–≥–¥–∞ –∏–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç—å
- –ú–µ–¥–ª–µ–Ω–Ω–µ–µ, —á–µ–º —á–∏—Å—Ç–æ–µ ASGI
