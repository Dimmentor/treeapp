#asyncio

## üîç –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ
1. [–ó–∞—á–µ–º –Ω–∞–º –Ω—É–∂–µ–Ω asyncio](#1-–∑–∞—á–µ–º-–Ω–∞–º-–Ω—É–∂–µ–Ω-asyncio)

2. [–ß—Ç–æ —Ç–∞–∫–æ–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–æ–¥](#2-—á—Ç–æ-—Ç–∞–∫–æ–µ-–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π-–∫–æ–¥)

3. [–ß—Ç–æ —Ç–∞–∫–æ–µ GIL?–ö–∞–∫ –æ–Ω —É—Å—Ç—Ä–æ–µ–Ω](#3-—á—Ç–æ-—Ç–∞–∫–æ–µ-gil?–∫–∞–∫-–æ–Ω-—É—Å—Ç—Ä–æ–µ–Ω)

4. [–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—É —Ñ—É–Ω–∫—Ü–∏—è–º–∏ send, next, throw](#4-—á—Ç–æ-–ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç-–ø—Ä–∏-–æ–±—Ä–∞—â–µ–Ω–∏–∏-–∫-–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—É-—Ñ—É–Ω–∫—Ü–∏—è–º–∏-send-next-throw)

5. [GIL —É—á–∞—Å—Ç–≤—É–µ—Ç –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ python –∫–æ–¥–∞](#5-gil-—É—á–∞—Å—Ç–≤—É–µ—Ç-–ø—Ä–∏-–≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏-–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ-python-–∫–æ–¥–∞)
   
6. [–ú–æ–∂–Ω–æ –ª–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º—É–ª—å—Ç–∏–ø—Ä–æ—Ü–µ—Å—Å–∏–Ω–≥ –∏ asyncio](#6-–º–æ–∂–Ω–æ-–ª–∏-–æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å-–º—É–ª—å—Ç–∏–ø—Ä–æ—Ü–µ—Å—Å–∏–Ω–≥-–∏-asyncio)
   
7. [–ì–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π (event loop) –≤ asyncio](#7-–≥–¥–µ-–Ω–∞—Ö–æ–¥–∏—Ç—Å—è-—Ü–∏–∫–ª-—Å–æ–±—ã—Ç–∏–π-(event-loop)-–≤-asyncio)
   
8. [–ó–∞—á–µ–º –Ω—É–∂–Ω—ã Future –≤ asyncio](#8-–∑–∞—á–µ–º-–Ω—É–∂–Ω—ã-future-–≤-asyncio)

9. [–ú–µ—Ç–æ–¥—ã asyncio](#9-–ú–µ—Ç–æ–¥—ã-asyncio)

10. [–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∏—Ç–µ—Ä–∞—Ç–æ—Ä](#10-–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π-–∏—Ç–µ—Ä–∞—Ç–æ—Ä)

11. [–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞](#11-–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π-–º–µ–Ω–µ–¥–∂–µ—Ä-–∫–æ–Ω—Ç–µ–∫—Å—Ç–∞)

12. [–¶–∏–∫–ª —Å–æ–±—ã—Ç–∏–π](#12-—Ü–∏–∫–ª-—Å–æ–±—ã—Ç–∏–π)

13. [Task](#13-task)
    
---   
## üîç –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ
1. [–ß–µ–º asyncio.gather() –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç asyncio.wait()](#1-—á–µ–º-asynciogather-–æ—Ç–ª–∏—á–∞–µ—Ç—Å—è-–æ—Ç-asynciowait)  
2. [–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç, –µ—Å–ª–∏ await –≤—ã–∑–≤–∞—Ç—å –≤–Ω—É—Ç—Ä–∏ asyncio.create_task()](#2-—á—Ç–æ-–ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç-–µ—Å–ª–∏-await-–≤—ã–∑–≤–∞—Ç—å-–≤–Ω—É—Ç—Ä–∏-asynciocreate_task)  
3. [–ö–∞–∫ –æ—Ç–º–µ–Ω–∏—Ç—å Task –≤ asyncio](#3-–∫–∞–∫-–æ—Ç–º–µ–Ω–∏—Ç—å-task-–≤-asyncio)  
4. [–ö–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ç–∞–π–º–∞—É—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ—Ä—É—Ç–∏–Ω—ã](#4-–∫–∞–∫-—Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å-—Ç–∞–π–º–∞—É—Ç-–≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è-–∫–æ—Ä—É—Ç–∏–Ω—ã)  
5. [–ß—Ç–æ –¥–µ–ª–∞–µ—Ç asyncio.shield()](#5-—á—Ç–æ-–¥–µ–ª–∞–µ—Ç-asyncioshield)  
6. [–ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å –±–ª–æ–∫–∏—Ä—É—é—â—É—é —Ñ—É–Ω–∫—Ü–∏—é –≤ async –∫–æ–¥–µ –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ event loop](#6-–∫–∞–∫-–∑–∞–ø—É—Å—Ç–∏—Ç—å-–±–ª–æ–∫–∏—Ä—É—é—â—É—é-—Ñ—É–Ω–∫—Ü–∏—é-–≤-async-–∫–æ–¥–µ-–±–µ–∑-–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏-event-loop)  
7. [–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç asyncio.Lock –∏ –∑–∞—á–µ–º –æ–Ω –Ω—É–∂–µ–Ω](#7-–∫–∞–∫-—Ä–∞–±–æ—Ç–∞–µ—Ç-asynciolock-–∏-–∑–∞—á–µ–º-–æ–Ω-–Ω—É–∂–µ–Ω)  
8. [–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç, –µ—Å–ª–∏ –Ω–µ await-–∏—Ç—å Task –∏ –æ–Ω–∞ –≤—ã–±—Ä–æ—Å–∏—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ](#8-—á—Ç–æ-–ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç-–µ—Å–ª–∏-–Ω–µ-await-–∏—Ç—å-task-–∏-–æ–Ω–∞-–≤—ã–±—Ä–æ—Å–∏—Ç-–∏—Å–∫–ª—é—á–µ–Ω–∏–µ)  
9. [–ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ç–º–µ–Ω–∏—Ç—å asyncio.gather()](#9-–∫–∞–∫-–ø—Ä–∞–≤–∏–ª—å–Ω–æ-–æ—Ç–º–µ–Ω–∏—Ç—å-asynciogather)  
10. [–ö–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –≤ asyncio.gather()](#10-–∫–∞–∫-–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å-–æ—à–∏–±–∫–∏-–≤-asynciogather)  
11. [–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å asyncio.Semaphore –∏ –¥–ª—è —á–µ–≥–æ –æ–Ω –Ω—É–∂–µ–Ω](#11-–∫–∞–∫-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å-asynciosemaphore-–∏-–¥–ª—è-—á–µ–≥–æ-–æ–Ω-–Ω—É–∂–µ–Ω)  
12. [–ß—Ç–æ –¥–µ–ª–∞–µ—Ç asyncio.Queue, –∏ —á–µ–º –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –æ–±—ã—á–Ω–æ–≥–æ queue.Queue](#12-—á—Ç–æ-–¥–µ–ª–∞–µ—Ç-asyncioqueue-–∏-—á–µ–º-–æ—Ç–ª–∏—á–∞–µ—Ç—Å—è-–æ—Ç-–æ–±—ã—á–Ω–æ–≥–æ-queuequeue)  
13. [–ö–∞–∫ –∏–∑–±–µ–∂–∞—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ event loop –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Å—Ç–æ—Ä–æ–Ω–Ω–µ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏](#13-–∫–∞–∫-–∏–∑–±–µ–∂–∞—Ç—å-–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏-event-loop-–ø—Ä–∏-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏-—Å—Ç–æ—Ä–æ–Ω–Ω–µ–π-–±–∏–±–ª–∏–æ—Ç–µ–∫–∏)  
14. [–ß—Ç–æ –¥–µ–ª–∞–µ—Ç loop.call_later() –∏ –≤ –∫–∞–∫–∏—Ö —Å–ª—É—á–∞—è—Ö –æ–Ω –ø–æ–ª–µ–∑–µ–Ω](#14-—á—Ç–æ-–¥–µ–ª–∞–µ—Ç-loopcall_later-–∏-–≤-–∫–∞–∫–∏—Ö-—Å–ª—É—á–∞—è—Ö-–æ–Ω-–ø–æ–ª–µ–∑–µ–Ω)  
15. [–ß–µ–º loop.run_in_executor() –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç asyncio.to_thread()](#15-—á–µ–º-looprun_in_executor-–æ—Ç–ª–∏—á–∞–µ—Ç—Å—è-–æ—Ç-asyncioto_thread)  
16. [–ö–∞–∫ —É–∑–Ω–∞—Ç—å, –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å –ª–∏ –∑–∞–¥–∞—á–∞ Task](#16-–∫–∞–∫-—É–∑–Ω–∞—Ç—å-–∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å-–ª–∏-–∑–∞–¥–∞—á–∞-task)  
17. [–ß—Ç–æ –¥–µ–ª–∞–µ—Ç asyncio.Event, –∏ –∫–æ–≥–¥–∞ –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å](#17-—á—Ç–æ-–¥–µ–ª–∞–µ—Ç-asyncioevent-–∏-–∫–æ–≥–¥–∞-–µ–≥–æ-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å)  
18. [–ö–∞–∫ –æ—Ç–ª–æ–∂–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–¥–∞ –≤ asyncio, –Ω–µ –±–ª–æ–∫–∏—Ä—É—è event loop](#18-–∫–∞–∫-–æ—Ç–ª–æ–∂–∏—Ç—å-–≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ-–∫–æ–¥–∞-–≤-asyncio-–Ω–µ-–±–ª–æ–∫–∏—Ä—É—è-event-loop)  
19. [–ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å asyncio.run() –≤–Ω—É—Ç—Ä–∏ —É–∂–µ –∑–∞–ø—É—â–µ–Ω–Ω–æ–≥–æ event loop](#19-–º–æ–∂–Ω–æ-–ª–∏-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å-asynciorun-–≤–Ω—É—Ç—Ä–∏-—É–∂–µ-–∑–∞–ø—É—â–µ–Ω–Ω–æ–≥–æ-event-loop)  
20. [–ö–∞–∫ –æ–±–µ—Å–ø–µ—á–∏—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ asyncio-–ø—Ä–æ–≥—Ä–∞–º–º—ã (graceful shutdown)](#20-–∫–∞–∫-–æ–±–µ—Å–ø–µ—á–∏—Ç—å-–±–µ–∑–æ–ø–∞—Å–Ω–æ–µ-–∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ-asyncio-–ø—Ä–æ–≥—Ä–∞–º–º—ã-graceful-shutdown)  
21. [–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç, –µ—Å–ª–∏ asyncio.Lock –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è –∑–∞—Ö–≤–∞—Ç–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ –∏–∑ —Ç–æ–π –∂–µ –∫–æ—Ä—É—Ç–∏–Ω—ã](#21-—á—Ç–æ-–ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç-–µ—Å–ª–∏-asynciolock-–ø–æ–ø—ã—Ç–∞—Ç—å—Å—è-–∑–∞—Ö–≤–∞—Ç–∏—Ç—å-–ø–æ–≤—Ç–æ—Ä–Ω–æ-–∏–∑-—Ç–æ–π-–∂–µ-–∫–æ—Ä—É—Ç–∏–Ω—ã)  
22. [–í —á—ë–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É await task –∏ await asyncio.gather(task)](#22-–≤-—á—ë–º-—Ä–∞–∑–Ω–∏—Ü–∞-–º–µ–∂–¥—É-await-task-–∏-await-asynciogathertask)  
23. [–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç, –µ—Å–ª–∏ –≤—ã–∑–≤–∞—Ç—å await asyncio.sleep(0)](#23-—á—Ç–æ-–ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç-–µ—Å–ª–∏-–≤—ã–∑–≤–∞—Ç—å-await-asynciosleep0)  
24. [–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é event loop –∏–ª–∏ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ Task](#24-–∫–∞–∫-—Å–æ–∑–¥–∞—Ç—å-—Å–≤–æ—é-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é-event-loop-–∏–ª–∏-–∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ-task)  
25. [–ö–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–µ –ª–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π –≤ asyncio](#25-–∫–∞–∫-—Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å-–ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–µ-–ª–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ-–≤—Å–µ—Ö-—Å–æ–±—ã—Ç–∏–π-–≤-asyncio)  
26. [–ü–æ—á–µ–º—É Task –º–æ–∂–µ—Ç –±—ã—Ç—å "–∑–∞–≤–∏—Å—à–µ–π", –¥–∞–∂–µ –µ—Å–ª–∏ –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç await](#26-–ø–æ—á–µ–º—É-task-–º–æ–∂–µ—Ç-–±—ã—Ç—å-–∑–∞–≤–∏—Å—à–µ–π-–¥–∞–∂–µ-–µ—Å–ª–∏-–Ω–µ-–≤—ã–∑—ã–≤–∞–µ—Ç-await)  
27. [–ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å await –≤ __init__ –∏–ª–∏ __new__ –∫–ª–∞—Å—Å–æ–≤](#27-–º–æ–∂–Ω–æ-–ª–∏-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å-await-–≤-__init__-–∏–ª–∏-__new__-–∫–ª–∞—Å—Å–æ–≤)  
28. [–ö–∞–∫ –º–æ–∂–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –æ–±—â–µ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∑–∞–¥–∞—á](#28-–∫–∞–∫-–º–æ–∂–Ω–æ-–æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å-–æ–±—â–µ–µ-–≤—Ä–µ–º—è-–≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è-–Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö-–∑–∞–¥–∞—á)  
29. [–ß–µ–º asyncio.wait(..., return_when=FIRST_COMPLETED) –ø–æ–ª–µ–∑–µ–Ω](#29-—á–µ–º-asynciowait-return_whenfirst_completed-–ø–æ–ª–µ–∑–µ–Ω)  
30. [–ö–∞–∫ –æ—Ç—Å–ª–µ–¥–∏—Ç—å "–∑–∞–±—ã—Ç—ã–µ" –∑–∞–¥–∞—á–∏ –≤ asyncio, –∫–æ—Ç–æ—Ä—ã–µ –≤–∏—Å—è—Ç –≤ —Ñ–æ–Ω–µ](#30-–∫–∞–∫-–æ—Ç—Å–ª–µ–¥–∏—Ç—å-–∑–∞–±—ã—Ç—ã–µ-–∑–∞–¥–∞—á–∏-–≤-asyncio-–∫–æ—Ç–æ—Ä—ã–µ-–≤–∏—Å—è—Ç-–≤-—Ñ–æ–Ω–µ)  


---
### 1) –ó–∞—á–µ–º –Ω–∞–º –Ω—É–∂–µ–Ω asyncio

asyncio ‚Äî —ç—Ç–æ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –≤ Python, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–∏—Å–∞—Ç—å –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–π –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–π –∫–æ–¥ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∫–æ—Ä—É—Ç–∏–Ω (async/await).

–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –≤ I/O-bound –∑–∞–¥–∞—á–∞—Ö (—Å–µ—Ç–µ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã, —Ä–∞–±–æ—Ç–∞ —Å –ë–î, —Ñ–∞–π–ª–∞–º–∏ –∏ —Ç. –¥.).

–ú–µ–Ω—å—à–∏–µ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å –ø–æ—Ç–æ–∫–∞–º–∏ (–Ω–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø–æ—Ç–æ–∫–æ–≤).

–ß–µ—Ç–∫–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º (–≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏, –≥–¥–µ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –û–° –º–æ–∂–µ—Ç –ø—Ä–µ—Ä—ã–≤–∞—Ç—å –ø–æ—Ç–æ–∫–∏ –≤ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π –º–æ–º–µ–Ω—Ç).

–ü—Ä–æ—Å—Ç–æ—Ç–∞ –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ–≥–æ –∫–æ–¥–∞ (–ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å callback-–ø–æ–¥—Ö–æ–¥–æ–º –∏–ª–∏ —Ä—É—á–Ω—ã–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –ø–æ—Ç–æ–∫–∞–º–∏).

–ü—Ä–∏–º–µ—Ä:

```sh
import asyncio

async def fetch_data(url):
    print(f"–ó–∞–≥—Ä—É–∑–∫–∞ {url}...")
    await asyncio.sleep(2)  # –ò–º–∏—Ç–∞—Ü–∏—è I/O-–æ–ø–µ—Ä–∞—Ü–∏–∏
    return f"–î–∞–Ω–Ω—ã–µ —Å {url}"

async def main():
    task1 = asyncio.create_task(fetch_data("https://example.com"))
    task2 = asyncio.create_task(fetch_data("https://google.com"))
    await asyncio.gather(task1, task2)

asyncio.run(main())
```
–ó–¥–µ—Å—å –¥–≤–µ –∑–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ, –Ω–µ –±–ª–æ–∫–∏—Ä—É—è –¥—Ä—É–≥ –¥—Ä—É–≥–∞.


### 2) –ß—Ç–æ —Ç–∞–∫–æ–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–æ–¥

–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–æ–¥ ‚Äî —ç—Ç–æ –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å—Ç—Ä–æ–≥–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, –∞ –º–æ–∂–µ—Ç –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å—Å—è –∏ –≤–æ–∑–æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö (–æ–±—ã—á–Ω–æ –Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏—è—Ö –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞).

–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ—Ä—É—Ç–∏–Ω—ã (—Ñ—É–Ω–∫—Ü–∏–∏ —Å async/await).

–†–∞–±–æ—Ç–∞–µ—Ç –≤ –æ–¥–Ω–æ–º –ø–æ—Ç–æ–∫–µ (–Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–º).

–ù–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ—Ç–æ–∫ –Ω–∞ –¥–æ–ª–≥–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ–∂–∏–¥–∞–Ω–∏–∏ –æ—Ç–≤–µ—Ç–∞ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞).

–£–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Ü–∏–∫–ª–æ–º —Å–æ–±—ã—Ç–∏–π (event loop), –∫–æ—Ç–æ—Ä—ã–π —Ä–µ—à–∞–µ—Ç, –∫–∞–∫—É—é –∫–æ—Ä—É—Ç–∏–Ω—É –≤—ã–ø–æ–ª–Ω—è—Ç—å –¥–∞–ª—å—à–µ.

–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º –∫–æ–¥–æ–º:

```sh
# –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–æ–¥ (–±–ª–æ–∫–∏—Ä—É—é—â–∏–π)
response = requests.get("https://example.com")  # –ñ–¥–µ—Ç –æ—Ç–≤–µ—Ç–∞
print(response.text)

# –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–æ–¥ (–Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–π)
response = await aiohttp.get("https://example.com")  # –ú–æ–∂–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ –¥—Ä—É–≥—É—é –∑–∞–¥–∞—á—É
print(response.text)
```

### 3) –ß—Ç–æ —Ç–∞–∫–æ–µ GIL?–ö–∞–∫ –æ–Ω —É—Å—Ç—Ä–æ–µ–Ω

GIL (Global Interpreter Lock) ‚Äî —ç—Ç–æ –≥–ª–æ–±–∞–ª—å–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä–∞ –≤ CPython, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ–º—É –ø–æ—Ç–æ–∫—É Python –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏ (–¥–∞–∂–µ –Ω–∞ –º–Ω–æ–≥–æ—è–¥–µ—Ä–Ω—ã—Ö CPU).

–ö–∞–∫ —É—Å—Ç—Ä–æ–µ–Ω:

GIL ‚Äî —ç—Ç–æ –º—å—é—Ç–µ–∫—Å, –∫–æ—Ç–æ—Ä—ã–π –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º Python-–∫–æ–¥–∞.

–ü–æ—Ç–æ–∫ –¥–æ–ª–∂–µ–Ω –ø–æ–ª—É—á–∏—Ç—å GIL, —á—Ç–æ–±—ã –≤—ã–ø–æ–ª–Ω—è—Ç—å –±–∞–π—Ç-–∫–æ–¥ Python.

–ü–æ—Ç–æ–∫ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç GIL –ø—Ä–∏:

I/O-–æ–ø–µ—Ä–∞—Ü–∏—è—Ö (—á—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–∞, —Å–µ—Ç–µ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã).

–í—ã–∑–æ–≤–µ C-—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, NumPy –º–æ–∂–µ—Ç –æ—Ç–ø—É—Å–∫–∞—Ç—å GIL).

–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–º –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ (—á–µ—Ä–µ–∑ sys.setswitchinterval()).

–ü—Ä–æ–±–ª–µ–º—ã GIL:

–ù–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–Ω–æ–≥–æ—è–¥–µ—Ä–Ω—ã–µ CPU –¥–ª—è CPU-bound –∑–∞–¥–∞—á (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤—ã—á–∏—Å–ª–µ–Ω–∏–π).

–ó–∞–º–µ–¥–ª—è–µ—Ç –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã, –µ—Å–ª–∏ –æ–Ω–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç Python-–∫–æ–¥.

–û–±—Ö–æ–¥ GIL:

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º—É–ª—å—Ç–∏–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω–æ—Å—Ç–∏ (multiprocessing).

–í—ã–Ω–æ—Å CPU-bound –∑–∞–¥–∞—á –≤ C-—Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è.

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞ (–Ω–µ —Ç—Ä–µ–±—É–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –ø–æ—Ç–æ–∫–æ–≤).

### 4) –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—É —Ñ—É–Ω–∫—Ü–∏—è–º–∏ send, next, throw

–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã –≤ Python –º–æ–≥—É—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –∏ –≤—ã–±—Ä–∞—Å—ã–≤–∞—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏—è —á–µ—Ä–µ–∑ —ç—Ç–∏ –º–µ—Ç–æ–¥—ã.

next(gen)

–ó–∞–ø—É—Å–∫–∞–µ—Ç –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä (–∏–ª–∏ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ yield).

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ, –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–µ –≤ yield.

–ï—Å–ª–∏ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∑–∞–≤–µ—Ä—à–µ–Ω, –≤—ã–∑—ã–≤–∞–µ—Ç StopIteration.

gen.send(value)

–ü–µ—Ä–µ–¥–∞–µ—Ç value –≤ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä (—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º yield).

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ª–µ–¥—É—é—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞.

gen.throw(exc)

–í—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ exc –≤ –º–µ—Å—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ yield.

–ï—Å–ª–∏ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ, –æ–Ω –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç—É.

–ü—Ä–∏–º–µ—Ä:
```sh
python
def my_gen():
    x = yield "–Ω–∞—á–∞–ª–æ"
    try:
        yield f"–ø–æ–ª—É—á–µ–Ω–æ: {x}"
    except ValueError:
        yield "–æ—à–∏–±–∫–∞!"

gen = my_gen()
print(next(gen))          # "–Ω–∞—á–∞–ª–æ"
print(gen.send(42))       # "–ø–æ–ª—É—á–µ–Ω–æ: 42"
print(gen.throw(ValueError))  # "–æ—à–∏–±–∫–∞!"
```

### 5) GIL —É—á–∞—Å—Ç–≤—É–µ—Ç –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ python –∫–æ–¥–∞

–î–∞, GIL —É—á–∞—Å—Ç–≤—É–µ—Ç, –Ω–æ –Ω–µ –º–µ—à–∞–µ—Ç, –ø–æ—Ç–æ–º—É —á—Ç–æ:

–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –æ–¥–Ω–æ–º –ø–æ—Ç–æ–∫–µ (GIL –Ω–µ –º–µ—à–∞–µ—Ç, —Ç–∞–∫ –∫–∞–∫ –Ω–µ—Ç –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏–∏ –ø–æ—Ç–æ–∫–æ–≤).

Event loop –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç GIL –Ω–∞ I/O-–æ–ø–µ—Ä–∞—Ü–∏—è—Ö, –ø–æ–∑–≤–æ–ª—è—è –¥—Ä—É–≥–∏–º –ø–æ—Ç–æ–∫–∞–º —Ä–∞–±–æ—Ç–∞—Ç—å.

–ö–æ—Ä—É—Ç–∏–Ω—ã –ø–µ—Ä–µ–∫–ª—é—á–∞—é—Ç—Å—è –¥–æ–±—Ä–æ–≤–æ–ª—å–Ω–æ (—á–µ—Ä–µ–∑ await), –∞ –Ω–µ –≤—ã—Ç–µ—Å–Ω—è—é—Ç—Å—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ (–∫–∞–∫ –ø–æ—Ç–æ–∫–∏).

–í—ã–≤–æ–¥:
GIL –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ–±–ª–µ–º–æ–π –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω –∏ —Ç–∞–∫ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ –æ–¥–Ω–æ–º –ø–æ—Ç–æ–∫–µ. –û–¥–Ω–∞–∫–æ –µ—Å–ª–∏ –≤–Ω—É—Ç—Ä–∏ –∫–æ—Ä—É—Ç–∏–Ω –µ—Å—Ç—å CPU-bound –∫–æ–¥, –æ–Ω –º–æ–∂–µ—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å event loop (–ø–æ—ç—Ç–æ–º—É CPU-bound –∑–∞–¥–∞—á–∏ –ª—É—á—à–µ –≤—ã–Ω–æ—Å–∏—Ç—å –≤ –ø—Ä–æ—Ü–µ—Å—Å—ã).

–ü—Ä–∏–º–µ—Ä:

```sh
async def cpu_bound_task():
    # –≠—Ç–æ—Ç –∫–æ–¥ –±—É–¥–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å event loop, –µ—Å–ª–∏ –æ–Ω CPU-bound!
    result = sum(i * i for i in range(10**6))
    return result

# –†–µ—à–µ–Ω–∏–µ: –≤—ã–Ω–µ—Å—Ç–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å (—á–µ—Ä–µ–∑ `asyncio.to_thread` –∏–ª–∏ `ProcessPoolExecutor`).
```

### 6) –ú–æ–∂–Ω–æ –ª–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º—É–ª—å—Ç–∏–ø—Ä–æ—Ü–µ—Å—Å–∏–Ω–≥ –∏ asyncio

–î–∞, –º–æ–∂–Ω–æ, –Ω–æ —Å –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å—é.

–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
asyncio —É–ø—Ä–∞–≤–ª—è–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º–∏ –∑–∞–¥–∞—á–∞–º–∏ –≤ –æ–¥–Ω–æ–º –ø—Ä–æ—Ü–µ—Å—Å–µ (–æ–±—ã—á–Ω–æ –≤ –æ–¥–Ω–æ–º –ø–æ—Ç–æ–∫–µ).

multiprocessing –∑–∞–ø—É—Å–∫–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (–∫–∞–∂–¥—ã–π —Å–æ —Å–≤–æ–∏–º GIL –∏ —Å–≤–æ–∏–º event loop).

–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

```sh
import asyncio
from multiprocessing import Process

async def async_task(name):
    print(f"–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∑–∞–¥–∞—á–∞ {name} –∑–∞–ø—É—â–µ–Ω–∞")
    await asyncio.sleep(2)
    print(f"–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∑–∞–¥–∞—á–∞ {name} –∑–∞–≤–µ—Ä—à–µ–Ω–∞")

def run_async_loop():
    loop = asyncio.new_event_loop()
    asyncio.set_event_loop(loop)
    loop.run_until_complete(async_task("–≤ –ø—Ä–æ—Ü–µ—Å—Å–µ"))

if __name__ == "__main__":
    # –ó–∞–ø—É—Å–∫–∞–µ–º –¥–≤–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞, –≤ –∫–∞–∂–¥–æ–º —Å–≤–æ–π event loop
    p1 = Process(target=run_async_loop)
    p2 = Process(target=run_async_loop)
    p1.start()
    p2.start()
    p1.join()
    p2.join()
```

–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

–ö–∞–∂–¥—ã–π –ø—Ä–æ—Ü–µ—Å—Å –∏–º–µ–µ—Ç —Å–≤–æ–π event loop.

–í–Ω—É—Ç—Ä–∏ –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–æ–¥.

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —è–¥–µ—Ä CPU (—Ç–∞–∫ –∫–∞–∫ –ø—Ä–æ—Ü–µ—Å—Å—ã –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã GIL).

–ü—Ä–æ–±–ª–µ–º—ã –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:
–û–±—â–∞—è –ø–∞–º—è—Ç—å –º–µ–∂–¥—É –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ —Å–ª–æ–∂–Ω–∞ (–Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å multiprocessing.Queue, shared_memory –∏–ª–∏ IPC).

–ù–µ–ª—å–∑—è –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∫–æ—Ä—É—Ç–∏–Ω—ã –º–µ–∂–¥—É –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ (—Ç–æ–ª—å–∫–æ –ø—Ä–∏–º–∏—Ç–∏–≤—ã: —á–∏—Å–ª–∞, —Å—Ç—Ä–æ–∫–∏, pickle-–æ–±—ä–µ–∫—Ç—ã).

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤.

–í—ã–≤–æ–¥:

–î–∞, –º–æ–∂–Ω–æ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å, –Ω–æ —ç—Ç–æ —É—Å–ª–æ–∂–Ω—è–µ—Ç –∫–æ–¥.

–õ—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å asyncio –¥–ª—è I/O-bound –∑–∞–¥–∞—á, –∞ multiprocessing –¥–ª—è CPU-bound –∑–∞–¥–∞—á.

### 7) –ì–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π (event loop) –≤ asyncio

—Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π –≤—Å—Ç—Ä–æ–µ–Ω –≤ asyncio, –∏ –æ–±—ã—á–Ω–æ –æ–Ω —Å–∫—Ä—ã—Ç –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
–¶–∏–∫–ª —Å–æ–±—ã—Ç–∏–π ‚Äî —ç—Ç–æ "–¥–≤–∏–∂–æ–∫", –∫–æ—Ç–æ—Ä—ã–π —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –∫–æ—Ä—É—Ç–∏–Ω.

–û–Ω –Ω–µ–≤–∏–¥–∏–º –≤ –∫–æ–¥–µ, –ø–æ—Ç–æ–º—É —á—Ç–æ:

asyncio.run() –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç event loop.

–í–Ω—É—Ç—Ä–∏ –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç loop.run_until_complete().

–ü—Ä–∏–º–µ—Ä —è–≤–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

```sh
import asyncio

async def my_task():
    print("–ó–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è")
    await asyncio.sleep(1)

# –°–æ–∑–¥–∞–µ–º event loop –≤—Ä—É—á–Ω—É—é (–æ–±—ã—á–Ω–æ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è)
loop = asyncio.new_event_loop()
asyncio.set_event_loop(loop)
loop.run_until_complete(my_task())
loop.close()  # –í–∞–∂–Ω–æ –∑–∞–∫—Ä—ã—Ç—å, –µ—Å–ª–∏ —Å–æ–∑–¥–∞–ª–∏ –≤—Ä—É—á–Ω—É—é
```

–ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å event loop –Ω–∞–ø—Ä—è–º—É—é?
–ï—Å–ª–∏ –≤—ã –ø–∏—à–µ—Ç–µ –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –∫–æ–¥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –±–∏–±–ª–∏–æ—Ç–µ–∫—É –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å–æ–∫–µ—Ç–∞–º–∏).

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å asyncio —Å –¥—Ä—É–≥–∏–º event loop (–Ω–∞–ø—Ä–∏–º–µ—Ä, uvloop –∏–ª–∏ Qt event loop).

–í—ã–≤–æ–¥:

–û–±—ã—á–Ω–æ –Ω–µ –Ω—É–∂–Ω–æ —Ç—Ä–æ–≥–∞—Ç—å event loop ‚Äî asyncio.run() –¥–µ–ª–∞–µ—Ç –≤—Å—ë –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

–ù–æ –æ–Ω –µ—Å—Ç—å "–ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º" –∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –∫–æ—Ä—É—Ç–∏–Ω.

### 8) –ó–∞—á–µ–º –Ω—É–∂–Ω—ã Future –≤ asyncio
Future = —ç—Ç–æ –Ω–µ–∫–∏–π –æ–±—ä–µ–∫—Ç, –≤ –∫–æ—Ç–æ—Ä–æ–º —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤–æ–∑–º–æ–∂–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏.
Future ‚Äî —ç—Ç–æ –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä–æ–≥–æ –µ—â—ë –Ω–µ—Ç.

–ê–Ω–∞–ª–æ–≥–∏—è:
Future ‚Äî —ç—Ç–æ –∫–∞–∫ "–æ–±–µ—â–∞–Ω–∏–µ" (promise), —á—Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±—É–¥–µ—Ç –ø–æ–∑–∂–µ.

–≠—Ç–æ –±–æ–ª–µ–µ –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è, —á–µ–º –∫–æ—Ä—É—Ç–∏–Ω—ã (async/await).

–î–ª—è —á–µ–≥–æ –Ω—É–∂–Ω—ã:
–°–≤—è–∑—å –º–µ–∂–¥—É callback-—Å—Ç–∏–ª–µ–º –∏ async/await

–†–∞–Ω—å—à–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–æ–¥ –ø–∏—Å–∞–ª–∏ —Å –∫–æ–ª–±—ç–∫–∞–º–∏ (–∫–∞–∫ –≤ JavaScript –¥–æ Promise).

Future –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±–µ—Ä–Ω—É—Ç—å –∫–æ–ª–±—ç–∫ –≤ –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ await.

–†—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏

–ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å Future, –∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ–∑–∂–µ —á–µ—Ä–µ–∑ set_result().

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç async/await

–ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –µ—Å—Ç—å —Å—Ç–∞—Ä–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –Ω–∞ –∫–æ–ª–±—ç–∫–∞—Ö, –µ—ë –º–æ–∂–Ω–æ –æ–±–µ—Ä–Ω—É—Ç—å –≤ Future.

–ü—Ä–∏–º–µ—Ä:

```sh

import asyncio

async def set_future_result(fut):
    await asyncio.sleep(2)
    fut.set_result("–ì–æ—Ç–æ–≤–æ!")

async def main():
    # –°–æ–∑–¥–∞–µ–º Future –≤—Ä—É—á–Ω—É—é
    loop = asyncio.get_running_loop()
    fut = loop.create_future()

    # –ó–∞–ø—É—Å–∫–∞–µ–º –∑–∞–¥–∞—á—É, –∫–æ—Ç–æ—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    asyncio.create_task(set_future_result(fut))

    # –ñ–¥–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    result = await fut
    print(result)  # "–ì–æ—Ç–æ–≤–æ!"

asyncio.run(main())
```

–†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É Future –∏ Task:
Task ‚Äî —ç—Ç–æ –ø–æ–¥–∫–ª–∞—Å—Å Future, –∫–æ—Ç–æ—Ä—ã–π –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç –∫–æ—Ä—É—Ç–∏–Ω—É –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ event loop.

Future ‚Äî –±–æ–ª–µ–µ –æ–±—â–∞—è –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω–∞ –≤—Ä—É—á–Ω—É—é.

–í—ã–≤–æ–¥:

–û–±—ã—á–Ω–æ –Ω–µ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å Future –≤—Ä—É—á–Ω—É—é (–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ async/await).

–ù–æ –æ–Ω–∏ –ø–æ–ª–µ–∑–Ω—ã –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å legacy-–∫–æ–¥–æ–º –∏–ª–∏ —Ä—É—á–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å—é.

–ò—Ç–æ–≥:
asyncio + multiprocessing ‚Üí –î–∞, –º–æ–∂–Ω–æ, –Ω–æ —Å–ª–æ–∂–Ω–æ.

Event loop ‚Üí –°–∫—Ä—ã—Ç –≤ asyncio, –Ω–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é.

Future ‚Üí –ù–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è –¥–ª—è —Ä—É—á–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏.


### 9) –ú–µ—Ç–æ–¥—ã asyncio

–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏ asyncio:

```sh
asyncio.run(coroutine, *, debug=False):
```

–ó–∞–ø—É—Å–∫–∞–µ—Ç –ø–µ—Ä–µ–¥–∞–Ω–Ω—É—é –∫–æ—Ä—É—Ç–∏–Ω—É –≤ —Ü–∏–∫–ª–µ —Å–æ–±—ã—Ç–∏–π, —É–ø—Ä–∞–≤–ª—è—è –µ–≥–æ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º. –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π, –µ—Å–ª–∏ –æ–Ω –Ω–µ –±—ã–ª —Å–æ–∑–¥–∞–Ω —Ä–∞–Ω–µ–µ, –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–µ—Ä–µ–¥–∞–Ω–Ω—É—é –∫–æ—Ä—É—Ç–∏–Ω—É. –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∫–æ—Ä—É—Ç–∏–Ω—ã, —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è. 

```sh
asyncio.create_task(coroutine):
```

–°–æ–∑–¥–∞–µ—Ç Task –æ–±—ä–µ–∫—Ç –∏–∑ –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–π –∫–æ—Ä—É—Ç–∏–Ω—ã. –≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç –∫–æ—Ä—É—Ç–∏–Ω—É –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≤ —Ü–∏–∫–ª–µ —Å–æ–±—ã—Ç–∏–π, –≤–æ–∑–≤—Ä–∞—â–∞—è –æ–±—ä–µ–∫—Ç Task, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–µ–π. 

```sh
asyncio.gather(*coros_or_futures, loop=None, return_exceptions=False):
```

–ó–∞–ø—É—Å–∫–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ. –§—É–Ω–∫—Ü–∏—è –æ–∂–∏–¥–∞–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã—Ö –∫–æ—Ä—É—Ç–∏–Ω –∏–ª–∏ Future –æ–±—ä–µ–∫—Ç–æ–≤ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤. –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä return_exceptions=True –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏—è –∏ –≤–∫–ª—é—á–∞—Ç—å –∏—Ö –≤ —Ä–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â–∏–π —Å–ø–∏—Å–æ–∫. 

```sh
asyncio.sleep(delay, result=None, *, loop=None):
```

–ü—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ—Ä—É—Ç–∏–Ω—ã –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–µ–∫—É–Ω–¥. –≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –ø–æ–ª–µ–∑–µ–Ω –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–µ—Ä–∂–µ–∫, –æ–∂–∏–¥–∞–Ω–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –¥—Ä—É–≥–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –∏–ª–∏ –¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–¥–µ—Ä–∂–µ–∫. 

```sh
asyncio.wait(fs, *, loop=None, timeout=None, return_when=ALL_COMPLETED):
```

–û–∂–∏–¥–∞–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–¥–∞–Ω–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ –∫–æ—Ä—É—Ç–∏–Ω –∏–ª–∏ Future –æ–±—ä–µ–∫—Ç–æ–≤. –§—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ—Ä—Ç–µ–∂ –∏–∑ –¥–≤—É—Ö –º–Ω–æ–∂–µ—Å—Ç–≤: –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –∏ –æ–∂–∏–¥–∞—é—â–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á–∏. 
```sh
asyncio.shield(fut):
```

–ó–∞—â–∏—â–∞–µ—Ç –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–π Future –æ–±—ä–µ–∫—Ç –æ—Ç –æ—Ç–º–µ–Ω—ã. –ú–µ—Ç–æ–¥ –ø–æ–ª–µ–∑–µ–Ω –¥–ª—è –∑–∞—â–∏—Ç—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –æ—Ç –ø—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –æ—Ç–º–µ–Ω—ã. 

```sh
asyncio.run_coroutine_threadsafe(coro, loop):
```

–ü–ª–∞–Ω–∏—Ä—É–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ—Ä—É—Ç–∏–Ω—ã –≤ –¥—Ä—É–≥–æ–º –ø–æ—Ç–æ–∫–µ. –≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –ø–æ–∑–≤–æ–ª—è–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–æ–¥ –∏–∑ –Ω–µ–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤. 

```sh
asyncio.current_task(loop=None):
```

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—É—â—É—é –∑–∞–¥–∞—á—É, –≤—ã–ø–æ–ª–Ω—è–µ–º—É—é –≤ —Ü–∏–∫–ª–µ —Å–æ–±—ã—Ç–∏–π. 

```sh
asyncio.all_tasks(loop=None):
```

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –≤—Å–µ—Ö –∑–∞–¥–∞—á, –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≤ —Ü–∏–∫–ª–µ —Å–æ–±—ã—Ç–∏–π. 

```sh
asyncio.Task.cancel():
```

–û—Ç–º–µ–Ω—è–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏. 

```sh
asyncio.Task.done():
```

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –±—ã–ª–∞ –ª–∏ –∑–∞–¥–∞—á–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞. 

```sh
asyncio.Task.result():
```

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á–∏. 

```sh
asyncio.Task.exception():
```

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ, –≤–æ–∑–Ω–∏–∫—à–µ–µ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∑–∞–¥–∞—á–∏. 

```sh
asyncio.Task.add_done_callback(callback):
```

–î–æ–±–∞–≤–ª—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –≤—ã–∑–≤–∞–Ω–∞ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–¥–∞—á–∏. 

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:
```sh
–¶–∏–∫–ª —Å–æ–±—ã—Ç–∏–π (asyncio.get_event_loop()):
```

asyncio –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π. 

–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∏—Ç–µ—Ä–∞—Ç–æ—Ä—ã –∏ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã:

asyncio –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –∏—Ç–µ—Ä–∞—Ç–æ—Ä–æ–≤ –∏ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–≤, –ø–æ–∑–≤–æ–ª—è—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å async for –∏ async with –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏. 

–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è:
asyncio –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø—Ä–∏–º–∏—Ç–∏–≤—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏, —Ç–∞–∫–∏–µ –∫–∞–∫ Event, Lock, Semaphore –∏ Condition, –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–æ–º –∫ –æ–±—â–∏–º —Ä–µ—Å—É—Ä—Å–∞–º –≤ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–º –∫–æ–¥–µ. 


### 10) –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∏—Ç–µ—Ä–∞—Ç–æ—Ä

–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∏—Ç–µ—Ä–∞—Ç–æ—Ä ‚Äî —ç—Ç–æ –∏—Ç–µ—Ä–∞—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–¥–∞—ë—Ç –æ–±—ä–µ–∫—Ç—ã, –¥–æ–ø—É—Å–∫–∞—é—â–∏–µ –æ–∂–∏–¥–∞–Ω–∏–µ.

–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∏—Ç–µ—Ä–∞—Ç–æ—Ä: –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π —Ä–µ–∞–ª–∏–∑—É–µ—Ç –º–µ—Ç–æ–¥—ã aiter() –∏ anext(). –ú–µ—Ç–æ–¥ anext() –¥–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –æ–±—ä–µ–∫—Ç, –¥–æ–ø—É—Å–∫–∞—é—â–∏–π –æ–∂–∏–¥–∞–Ω–∏–µ. –ö–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è async for —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –æ–±—ä–µ–∫—Ç—ã, –¥–æ–ø—É—Å–∫–∞—é—â–∏–µ –æ–∂–∏–¥–∞–Ω–∏–µ, –≤–æ–∑–≤—Ä–∞—â—ë–Ω–Ω—ã–µ –º–µ—Ç–æ–¥–æ–º anext() –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞ –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –æ–Ω –Ω–µ –≤—ã–∑–æ–≤–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ StopAsyncIteration.

Python glossary

–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∏—Ç–µ—Ä–∞—Ç–æ—Ä –º–æ–∂–Ω–æ –æ–±–æ–π—Ç–∏, –∏—Å–ø–æ–ª—å–∑—É—è –≤—ã—Ä–∞–∂–µ–Ω–∏–µ async for.

...
–æ–±—Ö–æ–¥ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞

```sh
async for item in async_iterator:
    print(item)
```

–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —ç—Ç–æ–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –Ω–µ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–º—É –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é —Ü–∏–∫–ª–∞ for.

–í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –≤—ã–∑—ã–≤–∞—é—â–∞—è –∫–æ—Ä—É—Ç–∏–Ω–∞, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ü–∏–∫–ª for, –±—É–¥–µ—Ç –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å—Å—è –∏ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –æ–∂–∏–¥–∞—Ç—å –∫–∞–∂–¥—ã–π –æ–±—ä–µ–∫—Ç, –¥–æ–ø—É—Å–∫–∞—é—â–∏–π –æ–∂–∏–¥–∞–Ω–∏–µ, –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –∏–∑ –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞.

### 11) –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ ‚Äî —ç—Ç–æ –º–µ–Ω–µ–¥–∂–µ—Ä –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≤ —Å–≤–æ–∏—Ö –º–µ—Ç–æ–¥–∞—Ö enter –∏ exit.

Asynchronous Context Managers and ¬´async with¬ª

–í—ã—Ä–∞–∂–µ–Ω–∏–µ async with –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞.

–í—ã–∑—ã–≤–∞—é—â–∞—è –∫–æ—Ä—É—Ç–∏–Ω–∞ –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∏ –ø–æ–¥–æ–∂–¥—ë—Ç –º–µ–Ω–µ–¥–∂–µ—Ä –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–æ –≤—Ö–æ–¥–∞ –≤ –±–ª–æ–∫ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –∏ –ø–æ—Ö–æ–∂–∏–º –æ–±—Ä–∞–∑–æ–º –ø–æ—Å—Ç—É–ø–∏—Ç –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ –∏–∑ –±–ª–æ–∫–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞.

### 12) –¶–∏–∫–ª —Å–æ–±—ã—Ç–∏–π

–≠—Ç–æ ‚Äî –º–µ—Ö–∞–Ω–∏–∑–º, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º—ã, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞ –∫–æ—Ä—É—Ç–∏–Ω–∞—Ö, –∏ —Ä–µ–∞–ª–∏–∑—É–µ—Ç –∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω—É—é –º–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–æ—Å—Ç—å –∫–æ—Ä—É—Ç–∏–Ω.

–¶–∏–∫–ª —Å–æ–±—ã—Ç–∏–π ‚Äî —ç—Ç–æ –±–∞–∑–∞ –ª—é–±–æ–≥–æ asyncio-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –¶–∏–∫–ª —Å–æ–±—ã—Ç–∏–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –∏ –∫–æ–ª–ª–±—ç–∫–∏, —Å–µ—Ç–µ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤–≤–æ–¥–∞/–≤—ã–≤–æ–¥–∞, –ø–æ–¥–ø—Ä–æ—Ü–µ—Å—Å—ã.

Event Loop

–≠—Ç–æ—Ç –º–æ–¥—É–ª—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏ –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π, –∏ –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π API.

–í—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π API –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ Python-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π. –ê –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π API ‚Äî –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤, –Ω–æ, –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤, –Ω–µ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.

–ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è asyncio —Ä–µ–∞–ª–∏–∑—É—é—Ç—Å—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤–æ–≥–æ API, –∫–æ—Ç–æ—Ä—ã–π –¥–∞—ë—Ç –≤ —Ä–∞—Å–ø–æ—Ä—è–∂–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–æ—Ä—É—Ç–∏–Ω–∞–º–∏, –ø–æ—Ç–æ–∫–∞–º–∏, –ø—Ä–∏–º–∏—Ç–∏–≤–∞–º–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏, –ø–æ–¥–ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ –∏ –æ—á–µ—Ä–µ–¥—è–º–∏, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–º–∏ –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –∫–æ—Ä—É—Ç–∏–Ω–∞–º–∏.

–ù–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π API ‚Äî —ç—Ç–æ –æ—Å–Ω–æ–≤–∞ –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤–æ–≥–æ API, –≤ –µ–≥–æ —Å–æ—Å—Ç–∞–≤ –≤—Ö–æ–¥—è—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã —Ü–∏–∫–ª–∞ —Å–æ–±—ã—Ç–∏–π, —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã, –ø–æ–ª–∏—Ç–∏–∫–∏ –∏ –¥—Ä—É–≥–∏–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã.

### 13) Task 

Task ‚Äî —ç—Ç–æ –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è asyncio-–∫–æ—Ä—É—Ç–∏–Ω –∏ –∑–∞ –∏—Ö –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π –∑–∞–ø—É—Å–∫.
Task ‚Äî —ç—Ç–æ –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –∫–æ—Ä—É—Ç–∏–Ω—É, –∑–∞–ø—É—â–µ–Ω–Ω—É—é –≤ —Ü–∏–∫–ª–µ —Å–æ–±—ã—Ç–∏–π. –ó–∞–¥–∞—á–∏ (Task) –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –∫–æ—Ä—É—Ç–∏–Ω –∏ –ø–æ–∑–≤–æ–ª—è—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –Ω–∏–º–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ.

–ö–æ–≥–¥–∞ –∫–æ—Ä—É—Ç–∏–Ω–∞ –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –≤ –æ–±—ä–µ–∫—Ç Task, –æ–Ω–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ, –∏ –µ—ë –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å –∏–º —Å –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–æ–≤ –æ–±—ä–µ–∫—Ç–∞ Task. –ó–∞–¥–∞—á–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –∫–æ—Ä—É—Ç–∏–Ω–∞–º —Ä–∞–±–æ—Ç–∞—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å –¥—Ä—É–≥–∏–º–∏ –∫–æ—Ä—É—Ç–∏–Ω–∞–º–∏ –∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞, —á—Ç–æ —Å–ø–æ—Å–æ–±—Å—Ç–≤—É–µ—Ç –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Ä–µ—Å—É—Ä—Å–æ–≤ –∏ –ø–æ–≤—ã—à–µ–Ω–∏—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã.




--------------------

### 1) –ß–µ–º asyncio.gather() –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç asyncio.wait()

asyncio.gather() –∏ asyncio.wait() –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ asyncio Python –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∑–∞–¥–∞—á –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ, –Ω–æ –æ–Ω–∏ —Ä–∞–∑–ª–∏—á–∞—é—Ç—Å—è –≤ —Å–ø–æ—Å–æ–±–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏—è—Ö. asyncio.gather() —Å–æ–±–∏—Ä–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –∑–∞–¥–∞—á –≤ —Å–ø–∏—Å–æ–∫ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –µ–≥–æ, –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ asyncio.wait() –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–≤–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–∞: –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –∏ –Ω–µ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏, –ø–æ–∑–≤–æ–ª—è—è –±–æ–ª–µ–µ –≥–∏–±–∫–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ –º–µ—Ä–µ –∏—Ö –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏. 

–§—É–Ω–∫—Ü–∏—è asyncio.wait(list_task) –∏–º–µ–µ—Ç —Å—Ö–æ–∂–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Å asyncio.gather(), –æ–Ω–∏ –æ–±–µ –∑–∞–ø—É—Å–∫–∞—é—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ awaitable-–æ–±—ä–µ–∫—Ç—ã.

–¢–∞–∫ –≤ —á—ë–º —Ä–∞–∑–Ω–∏—Ü–∞?

asyncio.gather()- —Ñ–æ–∫—É—Å–∏—Ä—É–µ—Ç—Å—è –Ω–∞ —Å–±–æ—Ä–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤, –æ–Ω–∞ –∂–¥–µ—Ç –∫—É—á—É awaitable-–æ–±—ä–µ–∫—Ç–æ–≤ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –æ—Ç –Ω–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç. –¢–∞–∫–∂–µ –∫–∞–∂–¥–∞—è –∑–∞–¥–∞—á–∞ –∏–ª–∏ –≥—Ä—É–ø–ø–∞ –∑–∞–¥–∞—á –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–º–µ–Ω–µ–Ω–∞ –º–µ—Ç–æ–¥–æ–º .cancel()

asyncio.wait() - —Ç–æ—á–Ω–æ —Ç–∞–∫ –∂–µ –∂–¥–µ—Ç awaitable-–æ–±—ä–µ–∫—Ç—ã, –∏ —Ç–æ—á–Ω–æ —Ç–∞–∫ –∂–µ –≤—Å–µ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –±—É–¥—É—Ç –æ–±–æ—Ä–∞—á–∏–≤–∞—Ç—å—Å—è –≤ <class '_asyncio.Task'>. –ö–ª—é—á–µ–≤—ã–º –æ—Ç–ª–∏—á–∏–µ–º —è–≤–ª—è–µ—Ç—Å—è —Ç–æ, —á—Ç–æ –≤ asyncio.wait(timeout=2) –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω timeout, –∫–æ–≥–¥–∞ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è —Å–æ–ø—Ä–æ–≥—Ä–∞–º–º—ã –∏—Å—Ç–µ–∫–∞–µ—Ç, –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏—Å–∫–ª—é—á–µ–Ω–∏–µ TimeoutError. 
–ü–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É—Å–ª–æ–≤–∏—è (FIRST_COMPLETED, FIRST_EXCEPTION)

### 2) –ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç, –µ—Å–ª–∏ await –≤—ã–∑–≤–∞—Ç—å –≤–Ω—É—Ç—Ä–∏ asyncio.create_task()

–ï—Å–ª–∏ –≤—ã–∑–≤–∞—Ç—å await –≤–Ω—É—Ç—Ä–∏ asyncio.create_task(), —Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –æ–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–æ–ø—Ä–æ–≥—Ä–∞–º–º—ã, –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–π –≤ create_task(). asyncio.create_task() —Å–æ–∑–¥–∞–µ—Ç –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –∑–∞–¥–∞—á—É, –Ω–æ await –≤–Ω—É—Ç—Ä–∏ —ç—Ç–æ–π –∑–∞–¥–∞—á–∏ –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç –µ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –æ–∂–∏–¥–∞–µ–º–∞—è —Å–æ–ø—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–µ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è. –í –∏—Ç–æ–≥–µ, –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ—Ä—É—Ç–∏–Ω—ã, –≤ –∫–æ—Ç–æ—Ä–æ–π –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è create_task(), –±—É–¥–µ—Ç –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–¥–∞—á–∏, —Å–æ–∑–¥–∞–Ω–Ω–æ–π –≤–Ω—É—Ç—Ä–∏ –Ω–µ–µ.

create_task —Ç–æ–ª—å–∫–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç –∑–∞–¥–∞—á—É –≤ —Ñ–æ–Ω–µ

–ï—Å–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å await - –∫–æ–¥ –±—É–¥–µ—Ç –∂–¥–∞—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è (—Ç–µ—Ä—è–µ—Ç—Å—è —Å–º—ã—Å–ª task)

### 3) –ö–∞–∫ –æ—Ç–º–µ–Ω–∏—Ç—å Task –≤ asyncio

–ß—Ç–æ–±—ã –æ—Ç–º–µ–Ω–∏—Ç—å –∑–∞–¥–∞—á—É –≤ asyncio, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–∑–≤–∞—Ç—å –º–µ—Ç–æ–¥ cancel() —É –æ–±—ä–µ–∫—Ç–∞ Task. –≠—Ç–æ –∏–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç –æ—Ç–º–µ–Ω—É –∑–∞–¥–∞—á–∏, –∏ –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–π –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–æ–ø—Ä–æ–≥—Ä–∞–º–º—ã –≤ –∑–∞–¥–∞—á–µ –±—É–¥–µ—Ç –≤—ã–±—Ä–æ—à–µ–Ω–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ asyncio.CancelledError. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–ª–æ–∫–∏ try/finally –≤ —Å–æ–ø—Ä–æ–≥—Ä–∞–º–º–∞—Ö –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏. 

### 4) –ö–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ç–∞–π–º–∞—É—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ—Ä—É—Ç–∏–Ω—ã

–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é asyncio.wait_for(). –û–Ω–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–∫–∞–∑–∞—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ—Ä—É—Ç–∏–Ω—ã, –∏ –µ—Å–ª–∏ –æ–Ω–∞ –Ω–µ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è –∑–∞ —ç—Ç–æ –≤—Ä–µ–º—è, –±—É–¥–µ—Ç –≤—ã–∑–≤–∞–Ω–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ asyncio.TimeoutError
```sh
try:
    await asyncio.wait_for(task, timeout=5.0)
except asyncio.TimeoutError:
    print("–ü—Ä–µ–≤—ã—à–µ–Ω —Ç–∞–π–º–∞—É—Ç")
```

### 5) –ß—Ç–æ –¥–µ–ª–∞–µ—Ç asyncio.shield()

–§—É–Ω–∫—Ü–∏—è asyncio.shield() –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∑–∞—â–∏—Ç—ã –∑–∞–¥–∞—á–∏ –∏–ª–∏ –∫–æ—Ä—É—Ç–∏–Ω—ã –æ—Ç –æ—Ç–º–µ–Ω—ã. –û–Ω–∞ –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–π –µ–π –æ–±—ä–µ–∫—Ç (–∑–∞–¥–∞—á—É –∏–ª–∏ –∫–æ—Ä—É—Ç–∏–Ω—É) –∏ –¥–µ–ª–∞–µ—Ç –µ–≥–æ "–Ω–µ–≤–∏–¥–∏–º—ã–º" –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π –æ—Ç–º–µ–Ω—ã, –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ task.cancel() –∏–ª–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –µ—Å–ª–∏ –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è –æ—Ç–º–µ–Ω–∏—Ç—å –∑–∞—â–∏—â–µ–Ω–Ω—É—é –∑–∞–¥–∞—á—É, –∑–∞–ø—Ä–æ—Å –Ω–∞ –æ—Ç–º–µ–Ω—É –±—É–¥–µ—Ç –ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω –∏ "–ø–æ–≥–ª–æ—â–µ–Ω" –æ–±—ä–µ–∫—Ç–æ–º shield, –∞ —Å–∞–º–∞ –∑–∞—â–∏—â–µ–Ω–Ω–∞—è –∑–∞–¥–∞—á–∞ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ. 

* –ó–∞—â–∏—Ç–∞ –æ—Ç –æ—Ç–º–µ–Ω—ã:
asyncio.shield() –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –æ—Ç–º–µ–Ω—É –∑–∞–¥–∞—á–∏ –∏–ª–∏ –∫–æ—Ä—É—Ç–∏–Ω—ã, –∫–æ–≥–¥–∞ –æ–Ω–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è. 

* –ü–µ—Ä–µ—Ö–≤–∞—Ç –æ—Ç–º–µ–Ω—ã:
–ö–æ–≥–¥–∞ asyncio.shield() –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –ª—é–±–æ–π –∑–∞–ø—Ä–æ—Å –Ω–∞ –æ—Ç–º–µ–Ω—É, –∞–¥—Ä–µ—Å–æ–≤–∞–Ω–Ω—ã–π –∑–∞—â–∏—â–µ–Ω–Ω–æ–º—É –æ–±—ä–µ–∫—Ç—É, –±—É–¥–µ—Ç –ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω –æ–±—ä–µ–∫—Ç–æ–º shield, –∏ –∑–∞–¥–∞—á–∞ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ, –∫–∞–∫ –µ—Å–ª–∏ –±—ã –æ—Ç–º–µ–Ω—ã –Ω–µ –±—ã–ª–æ. 

* –í–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–π –æ–±—ä–µ–∫—Ç:
asyncio.shield() –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç asyncio.Future, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –æ–±–µ—Ä—Ç–∫—É –Ω–∞–¥ –∑–∞—â–∏—â–µ–Ω–Ω–æ–π –∑–∞–¥–∞—á–µ–π. 

* –ò—Å–∫–ª—é—á–µ–Ω–∏–µ CancelledError:
–ï—Å–ª–∏ –∫–æ—Ä—É—Ç–∏–Ω–∞, –æ–∂–∏–¥–∞—é—â–∞—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è Future –æ–±—ä–µ–∫—Ç–∞, —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ —Å –ø–æ–º–æ—â—å—é asyncio.shield(), –±—É–¥–µ—Ç –æ—Ç–º–µ–Ω–µ–Ω–∞, –æ–Ω–∞ –≤—Å–µ —Ä–∞–≤–Ω–æ –ø–æ–ª—É—á–∏—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ asyncio.CancelledError. 

* –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
asyncio.shield() –ø–æ–ª–µ–∑–Ω–∞, –∫–æ–≥–¥–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã—Ö —á–∞—Å—Ç–µ–π –∫–æ–¥–∞, –¥–∞–∂–µ –µ—Å–ª–∏ –æ—Å–Ω–æ–≤–Ω–∞—è –∑–∞–¥–∞—á–∞ –∏–ª–∏ –∫–æ—Ä—É—Ç–∏–Ω–∞, –≤ –∫–æ—Ç–æ—Ä–æ–π –æ–Ω–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è, –±—ã–ª–∞ –æ—Ç–º–µ–Ω–µ–Ω–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏ –≤ —Ñ–∞–π–ª –∏–ª–∏ –æ—á–∏—Å—Ç–∫–∏ —Ä–µ—Å—É—Ä—Å–æ–≤ –ø–µ—Ä–µ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ–º –ø—Ä–æ–≥—Ä–∞–º–º—ã.

### 6) –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å –±–ª–æ–∫–∏—Ä—É—é—â—É—é —Ñ—É–Ω–∫—Ü–∏—é –≤ async –∫–æ–¥–µ –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ event loop

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ asyncio.to_thread() –∏–ª–∏ asyncio.run_in_executor(). –≠—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –±–ª–æ–∫–∏—Ä—É—é—â–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ –∏–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å–µ, –Ω–µ –º–µ—à–∞—è —Ä–∞–±–æ—Ç–µ event loop.

–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. asyncio.to_thread():
–≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –æ–±—ã—á–Ω–æ–π (–Ω–µ–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π) —Ñ—É–Ω–∫—Ü–∏–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ. –û–Ω–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç Future, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∏–ª–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π. –≠—Ç–æ –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± –∑–∞–ø—É—Å—Ç–∏—Ç—å –±–ª–æ–∫–∏—Ä—É—é—â—É—é —Ñ—É–Ω–∫—Ü–∏—é –≤ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ.

3. asyncio.run_in_executor():
–≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–º executor. –û–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è ThreadPoolExecutor –¥–ª—è –∑–∞–¥–∞—á, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –≤–≤–æ–¥–æ–º/–≤—ã–≤–æ–¥–æ–º, –∏ ProcessPoolExecutor –¥–ª—è CPU-bound –∑–∞–¥–∞—á. –í—ã–±–æ—Ä executor –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–∏–ø–∞ –∑–∞–¥–∞—á–∏, –∫–æ—Ç–æ—Ä—É—é –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å. run_in_executor —Ç–∞–∫–∂–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç Future, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∏ –ø–æ–ª—É—á–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

### 7) –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç asyncio.Lock –∏ –∑–∞—á–µ–º –æ–Ω –Ω—É–∂–µ–Ω

asyncio.Lock –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á, –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π –º—å—é—Ç–µ–∫—Å–∞–º –≤ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–º –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏, –Ω–æ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å asyncio. –û–Ω –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∑–∞–¥–∞—á–∞ –º–æ–∂–µ—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –æ–±—â–µ–º—É —Ä–µ—Å—É—Ä—Å—É, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—è –≥–æ–Ω–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏ –¥—Ä—É–≥–∏–µ –ø—Ä–æ–±–ª–µ–º—ã, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–º –¥–æ—Å—Ç—É–ø–æ–º.


### 8) –ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç, –µ—Å–ª–∏ –Ω–µ await-–∏—Ç—å Task –∏ –æ–Ω–∞ –≤—ã–±—Ä–æ—Å–∏—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ

–ï—Å–ª–∏ –Ω–µ await-–∏—Ç—å Task –∏ —ç—Ç–∞ Task –≤—ã–±—Ä–æ—Å–∏—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ, —Ç–æ —ç—Ç–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –±—É–¥–µ—Ç –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–æ, –∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ, –∫–∞–∫ –±—É–¥—Ç–æ –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–∏–∑–æ—à–ª–æ. –≠—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ–º—É –ø–æ–≤–µ–¥–µ–Ω–∏—é –ø—Ä–æ–≥—Ä–∞–º–º—ã, —Ç–∞–∫ –∫–∞–∫ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–≥–ª–æ –±—ã —Å–∏–≥–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –æ–± –æ—à–∏–±–∫–µ, –Ω–µ –±—É–¥–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ. 


### 9) –ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ç–º–µ–Ω–∏—Ç—å asyncio.gather()

–ß—Ç–æ–±—ã –æ—Ç–º–µ–Ω–∏—Ç—å asyncio.gather(), –Ω—É–∂–Ω–æ –æ—Ç–º–µ–Ω–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω—ã –≤ gather(). –≠—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è –ø—É—Ç–µ–º –≤—ã–∑–æ–≤–∞ –º–µ—Ç–æ–¥–∞ cancel() –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ Task, –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª —Å–æ–∑–¥–∞–Ω –∏–∑ —Å–æ–ø—Ä–æ–≥—Ä–∞–º–º, –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã—Ö –≤ asyncio.gather(). asyncio.gather() –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤, –∏ –Ω–µ –∏–º–µ–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞ –¥–ª—è –æ—Ç–º–µ–Ω—ã. 

```sh
tasks = [task1, task2]
gather_task = asyncio.create_task(asyncio.gather(*tasks))
gather_task.cancel()  # –û—Ç–º–µ–Ω—è–µ—Ç –í–°–ï –ø–æ–¥–∑–∞–¥–∞—á–∏
```

### 10) –ö–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –≤ asyncio.gather()

–î–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ asyncio.gather() –≤ Python, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—é try...except –≤–æ–∫—Ä—É–≥ –≤—ã–∑–æ–≤–∞ asyncio.gather(). –ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –≤ –æ–¥–Ω–æ–π –∏–∑ –∫–æ—Ä—É—Ç–∏–Ω, –æ–Ω–æ –±—É–¥–µ—Ç –ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω–æ –≤ except –±–ª–æ–∫–µ, –∏ –≤—ã —Å–º–æ–∂–µ—Ç–µ –ø—Ä–µ–¥–ø—Ä–∏–Ω—è—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è, —Ç–∞–∫–∏–µ –∫–∞–∫ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–∫–∏ –∏–ª–∏ –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞.

```sh
results = await asyncio.gather(
    task1, task2,
    return_exceptions=True  # –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏—è –∫–∞–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
)
```

### 11) –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å asyncio.Semaphore –∏ –¥–ª—è —á–µ–≥–æ –æ–Ω –Ω—É–∂–µ–Ω

–û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π:

```sh
semaphore = asyncio.Semaphore(5)

async def limited_op():
    async with semaphore:
        await heavy_operation()
```


### 12) –ß—Ç–æ –¥–µ–ª–∞–µ—Ç asyncio.Queue, –∏ —á–µ–º –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –æ–±—ã—á–Ω–æ–≥–æ queue.Queue

asyncio.Queue –∏ queue.Queue –≤ Python –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —Å–æ–±–æ–π –æ—á–µ—Ä–µ–¥–∏ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤, –Ω–æ asyncio.Queue –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–º –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏, –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ queue.Queue –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–º –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏. –û—Å–Ω–æ–≤–Ω–æ–µ –æ—Ç–ª–∏—á–∏–µ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ asyncio.Queue —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –∫–æ—Ä—É—Ç–∏–Ω–∞–º–∏ –∏ —Ç—Ä–µ–±—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ await –ø—Ä–∏ –≤—ã–∑–æ–≤–µ –º–µ—Ç–æ–¥–æ–≤, —Ç–∞–∫–∏—Ö –∫–∞–∫ put() –∏ get(), –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ queue.Queue —è–≤–ª—è–µ—Ç—Å—è –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ–π –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–±–º–µ–Ω–∞ –¥–∞–Ω–Ω—ã–º–∏ –º–µ–∂–¥—É –ø–æ—Ç–æ–∫–∞–º–∏.

–û—Ç–ª–∏—á–∏–µ: –ù–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ—Ç–æ–∫, —Ä–∞–±–æ—Ç–∞–µ—Ç —Å await.

### 13) –ö–∞–∫ –∏–∑–±–µ–∂–∞—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ event loop –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Å—Ç–æ—Ä–æ–Ω–Ω–µ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

–ù—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ —ç—Ç–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫ (–µ—Å–ª–∏ –æ–Ω–∏ –¥–æ—Å—Ç—É–ø–Ω—ã) –∏–ª–∏ –æ–±–µ—Ä—Ç—ã–≤–∞—Ç—å –∏—Ö –≤ –∫–æ—Ä—É—Ç–∏–Ω—ã –∏ –∑–∞–ø—É—Å–∫–∞—Ç—å –≤ event loop —Å –ø–æ–º–æ—â—å—é asyncio.create_task –∏–ª–∏ asyncio.run_coroutine_threadsafe. –ï—Å–ª–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ API, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ—Ç–æ–∫–∏ –∏–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å—ã –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –±–ª–æ–∫–∏—Ä—É—é—â–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ, —á—Ç–æ–±—ã –Ω–µ –º–µ—à–∞—Ç—å —Ä–∞–±–æ—Ç–µ event loop.

```sh
    import asyncio
    import time
    import requests
    from concurrent.futures import ThreadPoolExecutor

    async def my_blocking_function():
        with ThreadPoolExecutor() as executor:
            result = await asyncio.to_thread(requests.get, "https://example.com")
            # –∏–ª–∏
            # result = await asyncio.get_event_loop().run_in_executor(executor, requests.get, "https://example.com")
        return result

    async def main():
        task = asyncio.create_task(my_blocking_function())
        # –î–µ–ª–∞–µ–º —á—Ç–æ-—Ç–æ –¥—Ä—É–≥–æ–µ, –ø–æ–∫–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –±–ª–æ–∫–∏—Ä—É—é—â–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è
        print("Working on other tasks...")
        await task
        print("Result:", task.result())

    if __name__ == "__main__":
        asyncio.run(main())
```

### 14) –ß—Ç–æ –¥–µ–ª–∞–µ—Ç loop.call_later() –∏ –≤ –∫–∞–∫–∏—Ö —Å–ª—É—á–∞—è—Ö –æ–Ω –ø–æ–ª–µ–∑–µ–Ω

–§—É–Ω–∫—Ü–∏—è loop.call_later(delay, callback, *args) –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ asyncio –ø–ª–∞–Ω–∏—Ä—É–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ callback —á–µ—Ä–µ–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è delay (–≤ —Å–µ–∫—É–Ω–¥–∞—Ö). –û–Ω–∞ –ø–æ–ª–µ–∑–Ω–∞ –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –≤ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–º –∫–æ–¥–µ. 


–¢–∞–π–º–µ—Ä—ã:
–†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ç–∞–π–º–µ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç —á–µ—Ä–µ–∑ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è, –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á –∏–ª–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Ç–∞–π–º–∞—É—Ç–æ–≤.

–ó–∞–¥–µ—Ä–∂–∫–∏:
–í—Å—Ç–∞–≤–∫–∞ –∑–∞–¥–µ—Ä–∂–µ–∫ –≤ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–æ–¥, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —á—Ä–µ–∑–º–µ—Ä–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —Å–∏—Å—Ç–µ–º—É –∏–ª–∏ –¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ –∑–∞–¥–µ—Ä–∂–µ–∫ –≤ —Å–µ—Ç–µ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö.

–û–±—Ä–∞—Ç–Ω—ã–π –≤—ã–∑–æ–≤ –ø–æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ –≤—Ä–µ–º–µ–Ω–∏:
–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–∞–∫–æ–π-–ª–∏–±–æ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –∏—Å—Ç–µ–∫–ª–æ –≤—Ä–µ–º—è, –æ—Ç–≤–µ–¥–µ–Ω–Ω–æ–µ –Ω–∞ –¥—Ä—É–≥—É—é –æ–ø–µ—Ä–∞—Ü–∏—é.

–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –∑–∞–¥–∞—á:
–í —Å–ª–æ–∂–Ω—ã—Ö –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö, loop.call_later() –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ–º –∑–∞–¥–∞—á –ø–æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ –≤—Ä–µ–º–µ–Ω–∏. 

### 15) –ß–µ–º loop.run_in_executor() –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç asyncio.to_thread()

–í asyncio, loop.run_in_executor() –∏ asyncio.to_thread() –æ–±–∞ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω—ã –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –±–ª–æ–∫–∏—Ä—É—é—â–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ, —á—Ç–æ–±—ã –Ω–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π.

loop.run_in_executor() –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –±–æ–ª–µ–µ –≥–∏–±–∫–∏–π –ø–æ–¥—Ö–æ–¥, –ø–æ–∑–≤–æ–ª—è—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª—é–±–æ–π executor, –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ asyncio.to_thread() —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ—Ç–æ–∫–∞–º–∏ –∏ —É–ø—Ä–æ—â–∞–µ—Ç –≤—ã–∑–æ–≤ –±–ª–æ–∫–∏—Ä—É—é—â–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ. 

loop.run_in_executor():

–ü–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª—é–±–æ–π executor, –≤–∫–ª—é—á–∞—è ThreadPoolExecutor (–¥–ª—è –ø–æ—Ç–æ–∫–æ–≤) –∏ ProcessPoolExecutor (–¥–ª—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤), –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ asyncio.to_thread() –∏—Å–ø–æ–ª—å–∑—É–µ—Ç ThreadPoolExecutor –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é. 

–û–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –±–ª–æ–∫–∏—Ä—É—é—â–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —Å–≤—è–∑–∞–Ω—ã —Å –≤–≤–æ–¥–æ–º/–≤—ã–≤–æ–¥–æ–º, —Ç–∞–∫–∏—Ö –∫–∞–∫ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –∏–ª–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö.

### 16) –ö–∞–∫ —É–∑–Ω–∞—Ç—å, –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å –ª–∏ –∑–∞–¥–∞—á–∞ Task

–ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –º–µ—Ç–æ–¥ done() –æ–±—ä–µ–∫—Ç–∞ Task. –≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç True, –µ—Å–ª–∏ –∑–∞–¥–∞—á–∞ –∑–∞–≤–µ—Ä—à–∏–ª–∞ —Å–≤–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ, –∏ False –≤ –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ. –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –∫–æ—Ä—É—Ç–∏–Ω–∞, –æ–±–µ—Ä–Ω—É—Ç–∞—è –≤ —ç—Ç–æ—Ç Task, –≤—ã–ø–æ–ª–Ω–∏–ª–∞—Å—å –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –≤–µ—Ä–Ω—É–ª–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏–ª–∏ –≤—ã–±—Ä–æ—Å–∏–ª–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ, –ª–∏–±–æ –±—ã–ª–∞ –æ—Ç–º–µ–Ω–µ–Ω–∞. 

### 17) –ß—Ç–æ –¥–µ–ª–∞–µ—Ç asyncio.Event, –∏ –∫–æ–≥–¥–∞ –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

–í asyncio –º–æ–¥—É–ª—å Event –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –ø—Ä–∏–º–∏—Ç–∏–≤ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∑–∞–¥–∞—á –æ –Ω–∞—Å—Ç—É–ø–ª–µ–Ω–∏–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —Å–æ–±—ã—Ç–∏—è. –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–¥–Ω–æ–π –∑–∞–¥–∞—á–µ —Å–∏–≥–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥—Ä—É–≥–∏–º –∑–∞–¥–∞—á–∞–º, —á—Ç–æ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ —É—Å–ª–æ–≤–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ. –≠—Ç–æ –¥–æ—Å—Ç–∏–≥–∞–µ—Ç—Å—è –∑–∞ —Å—á–µ—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ —Ñ–ª–∞–≥–∞, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (True) –∏–ª–∏ —Å–±—Ä–æ—à–µ–Ω (False).

–ú–æ–∂–Ω–æ –±—ã–ª–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –∑–∞–¥–∞–Ω–∏–∏, –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ - –Ω–∞—á–∞—Ç—å –∏—Ö –ø–∞—Ä—Å–∏–Ω–≥ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î. 
```sh
event = asyncio.Event()

async def waiter():
    await event.wait()  # –ñ–¥—ë–º —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ñ–ª–∞–≥–∞

async def setter():
    event.set()  # –†–∞–∑–±–ª–æ–∫–∏—Ä—É–µ—Ç –≤—Å–µ—Ö –æ–∂–∏–¥–∞—é—â–∏—Ö
```

### 18) –ö–∞–∫ –æ—Ç–ª–æ–∂–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–¥–∞ –≤ asyncio, –Ω–µ –±–ª–æ–∫–∏—Ä—É—è event loop

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é asyncio.sleep(). –û–Ω–∞ –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ—Ä—É—Ç–∏–Ω—ã –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–µ–∫—É–Ω–¥, –Ω–µ –±–ª–æ–∫–∏—Ä—É—è event loop, —Ç–∞–∫ –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Ç–∞–π–º–µ—Ä. 


### 19) –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å asyncio.run() –≤–Ω—É—Ç—Ä–∏ —É–∂–µ –∑–∞–ø—É—â–µ–Ω–Ω–æ–≥–æ event loop


–ù–µ—Ç, –Ω–µ–ª—å–∑—è. –§—É–Ω–∫—Ü–∏—è asyncio.run() –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –Ω–æ–≤–æ–≥–æ —Ü–∏–∫–ª–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π –∏ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ –≤–Ω—É—Ç—Ä–∏ —É–∂–µ –∑–∞–ø—É—â–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞. –ï—Å–ª–∏ –≤—ã –ø—ã—Ç–∞–µ—Ç–µ—Å—å –≤—ã–∑–≤–∞—Ç—å asyncio.run() –≤–Ω—É—Ç—Ä–∏ —É–∂–µ —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ event loop, —ç—Ç–æ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –æ—à–∏–±–∫–µ. 

* –ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ –≤–∞–º –Ω—É–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ—Ä—É—Ç–∏–Ω—É –≤–Ω—É—Ç—Ä–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Ü–∏–∫–ª–∞?

–í–º–µ—Å—Ç–æ asyncio.run() –≤–∞–º —Å–ª–µ–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å asyncio.create_task() –∏–ª–∏ loop.run_until_complete(). –≠—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å –∫–æ—Ä—É—Ç–∏–Ω—ã –≤ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º —Ü–∏–∫–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π. 


### 20) –ö–∞–∫ –æ–±–µ—Å–ø–µ—á–∏—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ asyncio-–ø—Ä–æ–≥—Ä–∞–º–º—ã (graceful shutdown)

–î–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è (graceful shutdown) asyncio-–ø—Ä–æ–≥—Ä–∞–º–º—ã –≤ Python, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π –∏ –¥–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö –≤—ã–ø–æ–ª–Ω—è—é—â–∏—Ö—Å—è –∑–∞–¥–∞—á.
* –≠—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è –ø—É—Ç–µ–º –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–∏–≥–Ω–∞–ª–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ü–∏–∫–ª—É —Å–æ–±—ã—Ç–∏–π –∏ –ø–æ—Å–ª–µ–¥—É—é—â–∏–º –æ–∂–∏–¥–∞–Ω–∏–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö –∑–∞–¥–∞—á.
* –û—Ç–¥–µ–ª–∏—Ç—å –≤—ã–ø–æ–ª–Ω—è—é—â–∏–µ—Å—è –∑–∞–¥–∞—á–∏ –∏ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ—Å—Ç–∞–ª—å–Ω—ã–µ:
```sh
 async def shutdown():
    tasks = [t for t in asyncio.all_tasks() if t is not asyncio.current_task()]
    for task in tasks:
        task.cancel()
    await asyncio.gather(*tasks, return_exceptions=True)
```

### 21) –ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç, –µ—Å–ª–∏ asyncio.Lock –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è –∑–∞—Ö–≤–∞—Ç–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ –∏–∑ —Ç–æ–π –∂–µ –∫–æ—Ä—É—Ç–∏–Ω—ã

–ï—Å–ª–∏ –∫–æ—Ä—É—Ç–∏–Ω–∞ –ø—ã—Ç–∞–µ—Ç—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–æ –∑–∞—Ö–≤–∞—Ç–∏—Ç—å —É–∂–µ –∑–∞–Ω—è—Ç—ã–π –µ–π asyncio.Lock, —ç—Ç–æ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –≤–∑–∞–∏–º–æ–±–ª–æ–∫–∏—Ä–æ–≤–∫–µ (deadlock). –ö–æ—Ä—É—Ç–∏–Ω–∞ –±—É–¥–µ—Ç –∂–¥–∞—Ç—å –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏, –∫–æ—Ç–æ—Ä—É—é –æ–Ω–∞ —Å–∞–º–∞ –∂–µ –∏ —É–¥–µ—Ä–∂–∏–≤–∞–µ—Ç, —á—Ç–æ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –µ–µ –∑–∞–≤–∏—Å–∞–Ω–∏—é. –î—Ä—É–≥–∏–µ –∫–æ—Ä—É—Ç–∏–Ω—ã, –∫–æ—Ç–æ—Ä—ã–µ —Ç–∞–∫–∂–µ –æ–∂–∏–¥–∞—é—Ç —ç—Ç–æ—Ç –∂–µ –∑–∞–º–æ–∫, —Ç–∞–∫–∂–µ –æ–∫–∞–∂—É—Ç—Å—è –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏.

asyncio.Lock –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–µ—Å—É—Ä—Å–∞–º –≤ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–º –∫–æ–¥–µ. –û–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É:

1. –ó–∞—Ö–≤–∞—Ç (acquire):
–ö–æ—Ä—É—Ç–∏–Ω–∞ –≤—ã–∑—ã–≤–∞–µ—Ç lock.acquire() –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏. –ï—Å–ª–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å–≤–æ–±–æ–¥–Ω–∞, –∫–æ—Ä—É—Ç–∏–Ω–∞ –ø–æ–ª—É—á–∞–µ—Ç –µ–µ –∏ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ.

3. –û–∂–∏–¥–∞–Ω–∏–µ (wait):
–ï—Å–ª–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —É–∂–µ –∑–∞–Ω—è—Ç–∞, –∫–æ—Ä—É—Ç–∏–Ω–∞ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è, –ø–æ–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –Ω–µ –±—É–¥–µ—Ç –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∞.

5. –û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ (release):
–ö–æ—Ä—É—Ç–∏–Ω–∞, –∫–æ—Ç–æ—Ä–∞—è –∑–∞—Ö–≤–∞—Ç–∏–ª–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫—É, –≤—ã–∑—ã–≤–∞–µ—Ç lock.release() –¥–ª—è –µ–µ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥—Ä—É–≥–æ–π –æ–∂–∏–¥–∞—é—â–µ–π –∫–æ—Ä—É—Ç–∏–Ω–µ –ø–æ–ª—É—á–∏—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ.
–ö–æ–≥–¥–∞ –∫–æ—Ä—É—Ç–∏–Ω–∞ –ø—ã—Ç–∞–µ—Ç—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–æ –∑–∞—Ö–≤–∞—Ç–∏—Ç—å —É–∂–µ —É–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π –µ—é –∑–∞–º–æ–∫, –æ–Ω–∞ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ —Å–∏—Ç—É–∞—Ü–∏—é, –∫–æ–≥–¥–∞ –µ–π –Ω—É–∂–Ω–æ –¥–æ–∂–¥–∞—Ç—å—Å—è –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏, –∫–æ—Ç–æ—Ä—É—é –æ–Ω–∞ —Å–∞–º–∞ –∂–µ –∏ —É–¥–µ—Ä–∂–∏–≤–∞–µ—Ç. –ü–æ—Å–∫–æ–ª—å–∫—É –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –Ω–µ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è (–ø–æ—Ç–æ–º—É —á—Ç–æ –∫–æ—Ä—É—Ç–∏–Ω–∞ –∂–¥–µ—Ç, –ø–æ–∫–∞ —Å–∞–º–∞ –µ–µ –æ—Å–≤–æ–±–æ–¥–∏—Ç), –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –≤–∑–∞–∏–º–æ–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞, –∏ –∫–æ—Ä—É—Ç–∏–Ω–∞ –æ—Å—Ç–∞–µ—Ç—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –æ–∂–∏–¥–∞–Ω–∏—è –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ.

### 22) –ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç, –µ—Å–ª–∏ asyncio.Lock –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è –∑–∞—Ö–≤–∞—Ç–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ –∏–∑ —Ç–æ–π –∂–µ –∫–æ—Ä—É—Ç–∏–Ω—ã

–í Python, –∫–æ–≥–¥–∞ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ await task, –≤—ã –æ–∂–∏–¥–∞–µ—Ç–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ–¥–Ω–æ–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –∑–∞–¥–∞—á–∏. 

–ï—Å–ª–∏ –∂–µ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ await asyncio.gather(task1, task2, ...) –≤—ã –æ–∂–∏–¥–∞–µ—Ç–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å—Ä–∞–∑—É –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á, –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –±—É–¥—É—Ç –≤–æ–∑–≤—Ä–∞—â–µ–Ω—ã –≤ –≤–∏–¥–µ —Å–ø–∏—Å–∫–∞ –≤ —Ç–æ–º –ø–æ—Ä—è–¥–∫–µ, –≤ –∫–æ—Ç–æ—Ä–æ–º –±—ã–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω—ã –≤ asyncio.gather.

–†–∞–∑–Ω–∏—Ü–∞ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Å–ª–µ–¥—É—é—â–µ–º:

* await task:
–û–∂–∏–¥–∞–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ–¥–Ω–æ–π –∑–∞–¥–∞—á–∏.

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç —ç—Ç–æ–π –∑–∞–¥–∞—á–∏.

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –≤–∞–º –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –æ–¥–Ω—É –∑–∞–¥–∞—á—É –∏ –ø–æ–ª—É—á–∏—Ç—å –µ—ë —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

* await asyncio.gather(task1, task2, ...):

–û–∂–∏–¥–∞–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∑–∞–¥–∞—á.

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —ç—Ç–∏—Ö –∑–∞–¥–∞—á, –≤ —Ç–æ–º –∂–µ –ø–æ—Ä—è–¥–∫–µ, –≤ –∫–æ—Ç–æ—Ä–æ–º –±—ã–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω—ã –∑–∞–¥–∞—á–∏.

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–¥–∞—á –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –∏ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤–º–µ—Å—Ç–µ.


### 23) –ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç, –µ—Å–ª–∏ –≤—ã–∑–≤–∞—Ç—å await asyncio.sleep(0)

–ù–µ –∑–∞–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ, –Ω–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫—É asyncio –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥—Ä—É–≥–∏—Ö –æ–∂–∏–¥–∞—é—â–∏—Ö –∑–∞–¥–∞—á. 
–ü–æ–ª–µ–∑–Ω–æ –¥–ª—è "—Ä–∞–∑–≥—Ä—É–∑–∫–∏" –¥–ª–∏–Ω–Ω—ã—Ö –∫–æ—Ä—É—Ç–∏–Ω


### 24) –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é event loop –∏–ª–∏ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ Task

–ù—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ü–∏–∫–ª, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è, –∑–∞–¥–∞—á–∏ –∏ –¥—Ä—É–≥–∏–µ –¥–µ–π—Å—Ç–≤–∏—è. –í–º–µ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ asyncio, –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ—é –ø—Ä–æ—Å—Ç—É—é —Å–∏—Å—Ç–µ–º—É –Ω–∞ –æ—Å–Ω–æ–≤–µ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–≤ –∏ —Å–æ–ø—Ä–æ–≥—Ä–∞–º–º, —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å –æ—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–±–æ—Ç—ã event loop

```sh
class Task:
    def __init__(self, coro):
        self.coro = coro
        self.step = None

    def __iter__(self):
        return self

    def __next__(self):
        if self.step is None:
            try:
                self.step = self.coro.send(None)
            except StopIteration:
                raise StopIteration
        else:
            try:
                self.step = self.coro.send(self.step)
            except StopIteration:
                raise StopIteration
        return self.step

class EventLoop:
    def __init__(self):
        self.tasks = []

    def create_task(self, coro):
        task = Task(coro)
        self.tasks.append(task)
        return task

    def run_forever(self):
        while True:
            for task in self.tasks:
                try:
                    next(task)
                except StopIteration:
                    self.tasks.remove(task)
                    
async def my_coroutine(delay, message):
  for i in range(3):
    await sleep(delay)
    print(f"{message}: {i}")

async def sleep(duration):
    yield duration

loop = EventLoop()

loop.create_task(my_coroutine(1, "Task 1"))
loop.create_task(my_coroutine(2, "Task 2"))

loop.run_forever()
```

–ü–æ—è—Å–Ω–µ–Ω–∏–µ:

1. Task –∫–ª–∞—Å—Å:
2. 
–û–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç —Å–æ–ø—Ä–æ–≥—Ä–∞–º–º—É (–∫–æ—Ä—É—Ç–∏–Ω—É) –∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç –µ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º.

__init__ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–æ—Ä—É—Ç–∏–Ω—É –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç step –∫–∞–∫ None.

__iter__ –∏ __next__ —Ä–µ–∞–ª–∏–∑—É—é—Ç –∏—Ç–µ—Ä–∞—Ç–æ—Ä –¥–ª—è –∫–æ—Ä—É—Ç–∏–Ω—ã. –í __next__ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–µ—Ç–æ–¥ send –∫–æ—Ä—É—Ç–∏–Ω—ã –¥–ª—è –µ–µ –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏—è.

–ü—Ä–∏ –∫–∞–∂–¥–æ–º –≤—ã–∑–æ–≤–µ next(task) –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É await –≤ –∫–æ—Ä—É—Ç–∏–Ω–µ. –ï—Å–ª–∏ –∫–æ—Ä—É—Ç–∏–Ω–∞ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è StopIteration.

4. EventLoop –∫–ª–∞—Å—Å:
   
tasks - —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á (–æ–±—ä–µ–∫—Ç–æ–≤ Task) –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏.

create_task —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç Task –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –µ–≥–æ –≤ —Å–ø–∏—Å–æ–∫.

run_forever –∑–∞–ø—É—Å–∫–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª, –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–µ–±–∏—Ä–∞–µ—Ç –∑–∞–¥–∞—á–∏ –∏ –ø—Ä–æ–¥–≤–∏–≥–∞–µ—Ç –∏—Ö —Å –ø–æ–º–æ—â—å—é next(task). –ï—Å–ª–∏ –∑–∞–¥–∞—á–∞ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è (–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è StopIteration), –æ–Ω–∞ —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ —Å–ø–∏—Å–∫–∞.

6. my_coroutine –∏ sleep:
   
my_coroutine - –ø—Ä–∏–º–µ—Ä —Å–æ–ø—Ä–æ–≥—Ä–∞–º–º—ã, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç —á—Ç–æ-—Ç–æ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π (–∏—Å–ø–æ–ª—å–∑—É—è sleep).

sleep - –ø—Ä–æ—Å—Ç–∞—è —Å–æ–ø—Ä–æ–≥—Ä–∞–º–º–∞, –∫–æ—Ç–æ—Ä–∞—è –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∑–∞–¥–µ—Ä–∂–∫–∏. –≠—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è EventLoop –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ —Å–ª–µ–¥—É—é—â–µ–≥–æ —à–∞–≥–∞.

8. –ó–∞–ø—É—Å–∫:
   
–°–æ–∑–¥–∞–µ—Ç—Å—è —ç–∫–∑–µ–º–ø–ª—è—Ä EventLoop.

–°–æ–∑–¥–∞—é—Ç—Å—è –∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –∑–∞–¥–∞—á–∏ —Å –ø–æ–º–æ—â—å—é create_task.

run_forever –∑–∞–ø—É—Å–∫–∞–µ—Ç —Ü–∏–∫–ª –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π.
```sh
—Ålass CustomLoop(asyncio.AbstractEventLoop):
    ...

loop = CustomLoop()
asyncio.set_event_loop(loop)
```

### 25) –ö–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–µ –ª–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π –≤ asyncio
1.
```sh
loop = asyncio.get_event_loop()
loop.set_debug(True)  # –í–∫–ª—é—á–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
```

2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–æ–¥—É–ª—å logging –≤ —Å–æ—á–µ—Ç–∞–Ω–∏–∏ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π —É—Ä–æ–≤–Ω—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å asyncio.create_task() –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∑–∞–¥–∞—á –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é Task.add_done_callback(), —á—Ç–æ–±—ã –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–ª–∏ –æ—à–∏–±–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è. –î–ª—è —Ä–µ–∂–∏–º–∞ –æ—Ç–ª–∞–¥–∫–∏ –º–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏ asyncio —Å –ø–æ–º–æ—â—å—é asyncio.run(..., debug=True) –∏–ª–∏ loop.set_debug(True).

### 26) –ü–æ—á–µ–º—É Task –º–æ–∂–µ—Ç –±—ã—Ç—å "–∑–∞–≤–∏—Å—à–µ–π", –¥–∞–∂–µ –µ—Å–ª–∏ –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç await
Task –º–æ–∂–µ—Ç –∑–∞–≤–∏—Å–Ω—É—Ç—å, –¥–∞–∂–µ –µ—Å–ª–∏ –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç await, –µ—Å–ª–∏ –æ–Ω–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞ –æ–∂–∏–¥–∞–Ω–∏–µ–º —Ä–µ—Å—É—Ä—Å–∞, –∫–æ—Ç–æ—Ä—ã–π –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –±—É–¥–µ—Ç –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω, –∏–ª–∏ –µ—Å–ª–∏ –≤ –µ–µ –∫–æ–¥–µ –µ—Å—Ç—å –ª–æ–≥–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞, –ø—Ä–∏–≤–æ–¥—è—â–∞—è –∫ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–º—É —Ü–∏–∫–ª—É –∏–ª–∏ –¥—Ä—É–≥–æ–º—É –≤–∏–¥—É –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏. await –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è "–æ–∂–∏–¥–∞–Ω–∏—è" –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π, –Ω–æ –∑–∞–≤–∏—Å–∞–Ω–∏–µ –º–æ–∂–µ—Ç –ø—Ä–æ–∏–∑–æ–π—Ç–∏ –∏ –≤ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–º –∫–æ–¥–µ –≤–Ω—É—Ç—Ä–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –∑–∞–¥–∞—á–∏.

–ü—Ä–∏—á–∏–Ω—ã:

–ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª –±–µ–∑ await

–î–æ–ª–≥–∏–π —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–æ–¥

–í–∑–∞–∏–º–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ (deadlock)


### 27) –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å await –≤ __init__ –∏–ª–∏ __new__ –∫–ª–∞—Å—Å–æ–≤


–í Python 3.7 –∏ –≤—ã—à–µ, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ await –≤–Ω—É—Ç—Ä–∏ __init__ –∏ __new__ (–≤ —á–∞—Å—Ç–Ω–æ—Å—Ç–∏, –≤ __new__ –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤) –Ω–∞–ø—Ä—è–º—É—é –Ω–µ –¥–æ–ø—É—Å–∫–∞–µ—Ç—Å—è, —Ç–∞–∫ –∫–∞–∫ —ç—Ç–∏ –º–µ—Ç–æ–¥—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º–∏. –û–¥–Ω–∞–∫–æ, —Å—É—â–µ—Å—Ç–≤—É—é—Ç –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –≤–æ –≤—Ä–µ–º—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–ª–∞—Å—Å–∞, —Ç–∞–∫–∏–µ –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ–∞–±—Ä–∏—á–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ –∏–ª–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –º–∏–∫—Å–∏–Ω–æ–≤.

–ü–æ–¥—Ä–æ–±–Ω–µ–µ:

–ú–µ—Ç–æ–¥ __init__ —è–≤–ª—è–µ—Ç—Å—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–º –æ–±—ä–µ–∫—Ç–∞ –∏ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –æ–Ω –Ω–µ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å await –¥–ª—è –æ–∂–∏–¥–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π. –ü–æ–ø—ã—Ç–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è await –≤–Ω—É—Ç—Ä–∏ __init__ –≤—ã–∑–æ–≤–µ—Ç SyntaxError.

__new__ - —ç—Ç–æ –º–µ—Ç–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∫–ª–∞—Å—Å–∞. –î–ª—è –æ–±—ã—á–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤ –æ–Ω —Ç–∞–∫–∂–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º. –û–¥–Ω–∞–∫–æ, –≤ —Å–ª—É—á–∞–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤, __new__ –º–æ–∂–µ—Ç –±—ã—Ç—å –∫–æ—Ä—É—Ç–∏–Ω–æ–π (—Ç–æ –µ—Å—Ç—å, —Å–æ–¥–µ—Ä–∂–∞—Ç—å await), –∏ —Ç–æ–≥–¥–∞ –µ–≥–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞. –ù–æ –¥–∞–∂–µ –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ, —Å–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –±—É–¥–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –≤ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ, –∏ await –≤–Ω—É—Ç—Ä–∏ __new__ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –æ–±—ä–µ–∫—Ç–∞. –ü—Ä–∏ —ç—Ç–æ–º, –≤—ã–∑–æ–≤ __new__ –±—É–¥–µ—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è await –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞. 

–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã:

1. –§–∞–±—Ä–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã:
–ú–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Ñ–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥ (–æ–±—ã—á–Ω–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π) –≤ –∫–ª–∞—Å—Å–µ, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç. –≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å await –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –≤–æ –≤—Ä–µ–º—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏.

2. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –º–∏–∫—Å–∏–Ω—ã:
–ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –º–∏–∫—Å–∏–Ω, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏. –≠—Ç–æ—Ç –º–∏–∫—Å–∏–Ω –º–æ–∂–Ω–æ –Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å –æ—Ç –æ–±—ã—á–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞, —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏.

```sh
class MyClass:
    async def __init__(self):
        # –ù–ï –†–ê–ë–û–¢–ê–ï–¢!
        # –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∞–±—Ä–∏—á–Ω—ã–π –º–µ—Ç–æ–¥:
        pass

    @classmethod
    async def create(cls):
        obj = cls()
        await obj._init()
        return obj
```

### 28) –ö–∞–∫ –º–æ–∂–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –æ–±—â–µ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∑–∞–¥–∞—á

–î–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –æ–±—â–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∑–∞–¥–∞—á –≤ asyncio –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–±–∏–Ω–∞—Ü–∏—é asyncio.wait_for –∏ asyncio.gather –∏–ª–∏ asyncio.as_completed. –§—É–Ω–∫—Ü–∏—è asyncio.wait_for –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–¥–∞—Ç—å —Ç–∞–π–º–∞—É—Ç –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∑–∞–¥–∞—á–∏, –∞ asyncio.gather –∏–ª–∏ asyncio.as_completed –ø–æ–∑–≤–æ–ª—è—é—Ç –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–¥–∞—á –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ. 

```sh
async def with_timeout():
    try:
        await asyncio.wait_for(
            asyncio.gather(task1, task2),
            timeout=10.0
        )
    except asyncio.TimeoutError:
        print("Timeout!")
```

### 29) –ß–µ–º asyncio.wait(..., return_when=FIRST_COMPLETED) –ø–æ–ª–µ–∑–µ–Ω

–§—É–Ω–∫—Ü–∏—è asyncio.wait(..., return_when=FIRST_COMPLETED) –≤ –ø–æ–ª–µ–∑–Ω–∞, –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–¥–Ω–æ–π –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á. –û–Ω–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ä–∞–±–æ—Ç—É –ø—Ä–æ–≥—Ä–∞–º–º—ã, –∫–∞–∫ —Ç–æ–ª—å–∫–æ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è –ª—é–±–∞—è –∏–∑ –æ–∂–∏–¥–∞–µ–º—ã—Ö –∑–∞–¥–∞—á, –Ω–µ –¥–æ–∂–∏–¥–∞—è—Å—å –æ–∫–æ–Ω—á–∞–Ω–∏—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö. 
```sh
done, pending = await asyncio.wait(
    [task1, task2, task3],
    return_when=asyncio.FIRST_COMPLETED
)
# done —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–µ—Ä–≤—É—é –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—É—é –∑–∞–¥–∞—á—É
```


### 30) –ß–µ–º asyncio.wait(..., return_when=FIRST_COMPLETED) –ø–æ–ª–µ–∑–µ–Ω

1. –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –≤ –∑–∞–¥–∞—á–∞—Ö:
–û–±–µ—Ä–Ω–∏—Ç–µ –∫–æ–¥ –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏ –≤ try...except –±–ª–æ–∫ –¥–ª—è –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π. –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –≤–∞–º –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –∏, –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏, –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–≤–µ—Ä—à–∞—Ç—å –∑–∞–¥–∞—á–∏.

3. –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–¥–∞—á:
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ asyncio.Task –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∑–∞–¥–∞—á. –ú–µ—Ç–æ–¥ cancelled() –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–∑–Ω–∞—Ç—å, –±—ã–ª–∞ –ª–∏ –∑–∞–¥–∞—á–∞ –æ—Ç–º–µ–Ω–µ–Ω–∞, –∞ –º–µ—Ç–æ–¥ exception() - –ø–æ–ª—É—á–∏—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ, –µ—Å–ª–∏ –æ–Ω–æ –≤–æ–∑–Ω–∏–∫–ª–æ.

5. –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–¥–∞—á:
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ asyncio.wait –∏–ª–∏ asyncio.gather –¥–ª—è –æ–∂–∏–¥–∞–Ω–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–¥–∞—á. –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –≤–∞–º —É–∑–Ω–∞—Ç—å, –∫–∞–∫–∏–µ –∑–∞–¥–∞—á–∏ –∑–∞–≤–µ—Ä—à–∏–ª–∏—Å—å —É—Å–ø–µ—à–Ω–æ, –∞ –∫–∞–∫–∏–µ - –Ω–µ—Ç.

7. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ asyncio.as_completed:
–≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏—Ç–µ—Ä–∞—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–¥–∞–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –ø–æ –º–µ—Ä–µ –∏—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ.

9. –¢–∞–π–º-–∞—É—Ç—ã –¥–ª—è –∑–∞–¥–∞—á:
–î–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∑–∞–≤–∏—Å–∞–Ω–∏–π, –∑–∞–¥–∞–π—Ç–µ —Ç–∞–π–º-–∞—É—Ç—ã –¥–ª—è –∑–∞–¥–∞—á, –∏—Å–ø–æ–ª—å–∑—É—è asyncio.wait_for. –ï—Å–ª–∏ –∑–∞–¥–∞—á–∞ –Ω–µ –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å –≤ —Ç–µ—á–µ–Ω–∏–µ –∑–∞–¥–∞–Ω–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏, –æ–Ω–∞ –±—É–¥–µ—Ç –æ—Ç–º–µ–Ω–µ–Ω–∞.

11. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∑–∞–¥–∞—á –≤ —Ü–∏–∫–ª–µ —Å–æ–±—ã—Ç–∏–π:
–°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –≤ —Å–ø–∏—Å–æ–∫ –∏–ª–∏ —Å–ª–æ–≤–∞—Ä—å, —á—Ç–æ–±—ã –∏–º–µ—Ç—å –∫ –Ω–∏–º –¥–æ—Å—Ç—É–ø –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–µ.

13. –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ü–∏–∫–ª–∞ —Å–æ–±—ã—Ç–∏–π:
–ü–µ—Ä–µ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ–º —Ü–∏–∫–ª–∞ —Å–æ–±—ã—Ç–∏–π, –ø—Ä–æ–π–¥–∏—Ç–µ—Å—å –ø–æ —Å–ø–∏—Å–∫—É –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–¥–∞—á –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –æ–Ω–∏ –∑–∞–≤–µ—Ä—à–µ–Ω—ã –∏–ª–∏ –æ—Ç–º–µ–Ω–µ–Ω—ã.

```sh
async def monitor_tasks():
    while True:
        await asyncio.sleep(60)
        for task in asyncio.all_tasks():
            if task.done() and not task.result():
                print(f"–ó–∞–≤–∏—Å—à–∞—è –∑–∞–¥–∞—á–∞: {task}")
```
